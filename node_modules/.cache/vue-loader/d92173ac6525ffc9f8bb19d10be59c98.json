{"remainingRequest":"D:\\project\\dapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\dapp\\src\\views\\home.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\dapp\\src\\views\\home.vue","mtime":1650788405071},{"path":"D:\\project\\dapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650249328532},{"path":"D:\\project\\dapp\\node_modules\\babel-loader\\lib\\index.js","mtime":1650249335774},{"path":"D:\\project\\dapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650249328532},{"path":"D:\\project\\dapp\\node_modules\\vue-loader\\lib\\index.js","mtime":1650249334419}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Abi from '../json/Abi.js'\nimport AbiNft from '../json/AbiNft.js'\nimport footBar from '../components/footBar'\nimport Vue from 'vue'\nimport {\n\tNavBar,\n\tIcon,\n\tList\n} from 'vant'\nVue.use(NavBar).use(Icon).use(List)\nimport {\n\tgetShopDetail,\n\tlistNft\n} from \"../api\";\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tmyShop: [],\n\t\t\tshopImage: '',\n\t\t\tshoplist: [],\n\t\t\tpage: 1,\n\t\t\tnum: 10,\n\t\t\tloading: false,\n\t\t\tfinished: false,\n\t\t\tfinishedText: '',\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.listRequest()\n\t\tthis.empower() //授权账户\n\t},\n\tmethods: {\n\t\tonMore() {\n\t\t\tthis.page++\n\t\t\tthis.listRequest()\n\t\t},\n\t\t//nft列表\n\t\tlistRequest() {\n\t\t\tconst params = {\n\t\t\t\tpageNo: this.page,\n\t\t\t\tpageSize: this.num,\n\t\t\t}\n\t\t\tlistNft(params).then(res => {\n\t\t\t\tif (res.code == '200') {\n\t\t\t\t\tif (this.page == 1) {\n\t\t\t\t\t\tthis.shoplist = res.result.list\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.shoplist = this.shoplist.concat(res.result.list)\n\t\t\t\t\t}\n\t\t\t\t\tthis.loading = false\n\t\t\t\t\tif (res.result.list.length == 0 || res.result.list.length < 10) {\n\t\t\t\t\t\tthis.finished = true\n\t\t\t\t\t\tthis.finishedText = '没有更多了...'\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.$toast(res.message)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t//跳转详情\n\t\tgodetail(item) {\n\t\t\tthis.$router.push({\n\t\t\t\tpath: 'shopDetail',\n\t\t\t\tquery: {\n\t\t\t\t\tuserId: item.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t// this.$router.push({\n\t\t\t// \tname: 'shopDetail',\n\t\t\t// \tparams: {\n\t\t\t// \t\tuserId: item.id\n\t\t\t// \t}\n\t\t\t// })\n\t\t},\n\t\t//跳转搜索\n\t\tonClickRight() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'search',\n\t\t\t\tquery: {\n\t\t\t\t\towneradd: '1'\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t//钱包账户授权\n\t\tempower() {\n\t\t\tif (window.ethereum) {\n\t\t\t\twindow.ethereum.enable().then((res) => {\n\t\t\t\t\tif (!res[0]) {\n\t\t\t\t\t\tthis.$toast('请先登录小狐狸')\n\t\t\t\t\t} \n\t\t\t\t\tsessionStorage.setItem(\"myAddress\", res[0])\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthis.$toast('请安装MetaMask,浏览器才能开始使用。');\n\t\t\t}\n\t\t},\n\n\t\tget() {\n\t\t\tif (window.ethereum) {\n\t\t\t\twindow.ethereum.enable().then((res) => {\n\t\t\t\t\tif (!res[0]) {\n\t\t\t\t\t\tthis.$toast('请先登录小狐狸')\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//this.getBalance(res[0], 11111)\n\t\t\t\t\t\tconst web3 = new this.Web3(window.web3.currentProvider)\n\t\t\t\t\t\tconst address = \"0x0cd43FFF2a992E094E829B4b826fC67aBAe2D6E3\"\n\t\t\t\t\t\t//合约地址\n\t\t\t\t\t\tconst addressNFT = \"0x250019C9E3EB59Ef6eFAB410408F6c8E246f5A24\"\n\t\t\t\t\t\tconst myContract = new web3.eth.Contract(Abi, address)\n\t\t\t\t\t\tconst myContractNft = new web3.eth.Contract(AbiNft, addressNFT)\n\t\t\t\t\t\t//查询NFT余额\n\t\t\t\t\t\tmyContract.methods.balanceOf(res[0]).call().then(balance => {\n\t\t\t\t\t\t\tconsole.log('from balance:' + balance)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t//查询NFT授权\n\t\t\t\t\t\tmyContract.methods.getApproved(104).call().then(address => {\n\t\t\t\t\t\t\tconsole.log('from address :' + address)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t//读合约\n\t\t\t\t\t\t// myContract.methods.approve(\"0xaB069f281a15a3D0C2876F939331F4B63601cDBE\", 106)\n\t\t\t\t\t\t// \t.send({\n\t\t\t\t\t\t// \t\tfrom: res[0]\n\t\t\t\t\t\t// \t}).then(res => {\n\t\t\t\t\t\t// \t\tconsole.log('from res :' + res)\t\t\n\t\t\t\t\t\t// \t})\n\t\t\t\t\t\t//写合约\n\t\t\t\t\t\t// myContract.methods.safeTransferFrom(res[0],\"0xaB069f281a15a3D0C2876F939331F4B63601cDBE\", 106)\n\t\t\t\t\t\t// \t.send({\n\t\t\t\t\t\t// \t\tfrom: res[0]\n\t\t\t\t\t\t// \t}).then(res => {\n\t\t\t\t\t\t// \t\tconsole.log('from res :' + res)\n\t\t\t\t\t\t// \t})\n\t\t\t\t\t\t//查询归属人\n\t\t\t\t\t\tmyContract.methods.ownerOf(110).call().then(ownerAddress => {\n\t\t\t\t\t\t\tconsole.log('from ownerAddress :' + ownerAddress)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t//查询元数据\n\t\t\t\t\t\tmyContract.methods.tokenURI(110).call().then(urlAddress => {\n\t\t\t\t\t\t\tconsole.log('from urlAddress :' + urlAddress)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t//NFT下架时间戳\n\t\t\t\t\t\t// myContractNft.methods.getTimestamp(107).call().then(timesTamp => {\n\t\t\t\t\t\t// \t//获取当前时间戳单位毫秒\n\t\t\t\t\t\t// \tvar dataTime = new Date().getTime()\n\t\t\t\t\t\t// \t//当前时间戳与上架时间（秒）相比\n\t\t\t\t\t\t// \tconsole.log('from timesTamp :' + timesTamp, dataTime)\n\t\t\t\t\t\t// \tif (timesTamp*1000 - dataTime > 0) {\n\t\t\t\t\t\t// \t\t//商品未下架获取商品价格\n\t\t\t\t\t\t// \t\t//NFT上架价格\n\t\t\t\t\t\t// \t\tmyContractNft.methods.getPrices(110).call().then(prices => {\n\t\t\t\t\t\t// \t\t\tconsole.log('from prices :' + prices)\n\t\t\t\t\t\t// \t\t})\n\t\t\t\t\t\t// \t\t//购买NFT 获取是否授权（授权在上架商品时操作只需操作一次 获取时间戳 获取价格 \n\t\t\t\t\t\t// \t\tmyContractNft.methods.buy(110)\n\t\t\t\t\t\t// \t\t.send({\n\t\t\t\t\t\t// \t\t\tfrom: res[0],\n\t\t\t\t\t\t// \t\t\tvalue:web3.utils.toWei('0.1', 'ether')//动态获取商品价格\n\t\t\t\t\t\t// \t\t}).then(res => {\n\t\t\t\t\t\t// \t\t\tconsole.log('from res :' + res)\n\t\t\t\t\t\t// \t\t})\n\t\t\t\t\t\t// \t} else {\n\t\t\t\t\t\t// \t\tthis.$toast('商品已下架')\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// })\n\t\t\t\t\t\t//上架NFT商品\n\t\t\t\t\t\t//授权nft\n\t\t\t\t\t\tmyContract.methods.approve(\"0x0cd43FFF2a992E094E829B4b826fC67aBAe2D6E3\", 100)\n\t\t\t\t\t\t\t.send({\n\t\t\t\t\t\t\t\tfrom: res[0]\n\t\t\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\t\t\tconsole.log('from res :' + res)\n\t\t\t\t\t\t\t}).catch((error) => {\n\t\t\t\t\t\t\t\tconsole.log(\"授权error--->\" + error.code, error.message)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\tmyContractNft.methods.sell(108, web3.utils.toWei('0.01', 'ether'), 360000)\n\t\t\t\t\t\t\t.send({\n\t\t\t\t\t\t\t\tfrom: res[0]\n\t\t\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\t\t\tconsole.log('from res :' + res)\n\t\t\t\t\t\t\t}).catch((error) => {\n\t\t\t\t\t\t\t\tconsole.log(\"上架error--->\" + error.code, error.message)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthis.$toast('请安装 MetaMask,浏览器才能开始使用。');\n\t\t\t}\n\t\t},\n\t\t//商品描述\n\t\tdes() {\n\t\t\t//var api ='http://dweb.lindensys.cn/ipns/k51qzi5uqu5divqrok0get110odatax0tv8uqh3forzp1zhoxy7ft7cua188gt/babaofan/110'\n\t\t\tgetShopDetail('/100').then(res => {\n\t\t\t\tthis.myShop = res\n\t\t\t\tthis.shopImage = res.image\n\t\t\t\tconsole.log(\"数据\", res, 111)\n\t\t\t})\n\t\t},\n\t},\n\tcomponents: {\n\t\tfootBar\n\t}\n}\n",{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"home.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div class=\"wrap\">\r\n\t\t<div class=\"headerbox\">\r\n\t\t\t<van-nav-bar title=\"List of NFTs\" @click-right=\"onClickRight\">\r\n\t\t\t\t<template #right>\r\n\t\t\t\t\t<van-icon name=\"search\" size=\"25\" />\r\n\t\t\t\t</template>\r\n\t\t\t</van-nav-bar>\r\n\t\t</div>\r\n\t\t<div v-if=\"shoplist.length==0\" class=\"nolist\">\r\n\t\t\t<div><img src=\"../assets/images/nolist.png\" /></div>\r\n\t\t\t<div>No items to display</div>\r\n\t\t</div>\r\n\t\t<!-- 列表 -->\r\n\t\t<div class=\"content-box\" v-else>\r\n\t\t\t<van-list v-model:loading=\"loading\" :finished=\"finished\" :finished-text=\"finishedText\" @load=\"onMore\">\r\n\t\t\t\t<div class=\"content-boxleft\" v-for=\"(item,index) in shoplist\" :key='index' @click=\"godetail(item)\">\r\n\t\t\t\t\t<!-- item.image -->\r\n\t\t\t\t\t<img v-if=\"item.image==null\" class=\"boximg\" src=\"../assets/images/zw.png\" />\r\n\t\t\t\t\t<img v-else class=\"boximg\" :src=\"item.image\" />\r\n\t\t\t\t\t<div class=\"boxleft\">\r\n\t\t\t\t\t\t<span class=\"boxleftonel\">{{item.creator==null?'itemcreator':item.creator | ellipsis}}</span>\r\n\t\t\t\t\t\t<span class=\"boxleftoner\">Price</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"boxleft\">\r\n\t\t\t\t\t\t<span class=\"boxlefttwol omit\">{{item.name==null?'name':item.name}}</span>\r\n\t\t\t\t\t\t<span class=\"boxlefttwor omit\"><img src=\"../assets/images/icon1.png\">{{item.price}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"boxleft\">\r\n\t\t\t\t\t\t<span class=\"boxleftthreel omit\">#{{item.tokenId}}</span>\r\n\t\t\t\t\t\t<span class=\"boxleftthreer omit\">{{item.offSheftTime}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</van-list>\r\n\t\t</div>\r\n\t\t<foot-bar v-if=\"$route.meta.isMenu\"></foot-bar>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport Abi from '../json/Abi.js'\r\n\timport AbiNft from '../json/AbiNft.js'\r\n\timport footBar from '../components/footBar'\r\n\timport Vue from 'vue'\r\n\timport {\r\n\t\tNavBar,\r\n\t\tIcon,\r\n\t\tList\r\n\t} from 'vant'\r\n\tVue.use(NavBar).use(Icon).use(List)\r\n\timport {\r\n\t\tgetShopDetail,\r\n\t\tlistNft\r\n\t} from \"../api\";\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmyShop: [],\r\n\t\t\t\tshopImage: '',\r\n\t\t\t\tshoplist: [],\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tnum: 10,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tfinished: false,\r\n\t\t\t\tfinishedText: '',\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.listRequest()\r\n\t\t\tthis.empower() //授权账户\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonMore() {\r\n\t\t\t\tthis.page++\r\n\t\t\t\tthis.listRequest()\r\n\t\t\t},\r\n\t\t\t//nft列表\r\n\t\t\tlistRequest() {\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tpageNo: this.page,\r\n\t\t\t\t\tpageSize: this.num,\r\n\t\t\t\t}\r\n\t\t\t\tlistNft(params).then(res => {\r\n\t\t\t\t\tif (res.code == '200') {\r\n\t\t\t\t\t\tif (this.page == 1) {\r\n\t\t\t\t\t\t\tthis.shoplist = res.result.list\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.shoplist = this.shoplist.concat(res.result.list)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t\tif (res.result.list.length == 0 || res.result.list.length < 10) {\r\n\t\t\t\t\t\t\tthis.finished = true\r\n\t\t\t\t\t\t\tthis.finishedText = '没有更多了...'\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$toast(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//跳转详情\r\n\t\t\tgodetail(item) {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: 'shopDetail',\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tuserId: item.id\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// this.$router.push({\r\n\t\t\t\t// \tname: 'shopDetail',\r\n\t\t\t\t// \tparams: {\r\n\t\t\t\t// \t\tuserId: item.id\r\n\t\t\t\t// \t}\r\n\t\t\t\t// })\r\n\t\t\t},\r\n\t\t\t//跳转搜索\r\n\t\t\tonClickRight() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: 'search',\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\towneradd: '1'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//钱包账户授权\r\n\t\t\tempower() {\r\n\t\t\t\tif (window.ethereum) {\r\n\t\t\t\t\twindow.ethereum.enable().then((res) => {\r\n\t\t\t\t\t\tif (!res[0]) {\r\n\t\t\t\t\t\t\tthis.$toast('请先登录小狐狸')\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\tsessionStorage.setItem(\"myAddress\", res[0])\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$toast('请安装MetaMask,浏览器才能开始使用。');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tget() {\r\n\t\t\t\tif (window.ethereum) {\r\n\t\t\t\t\twindow.ethereum.enable().then((res) => {\r\n\t\t\t\t\t\tif (!res[0]) {\r\n\t\t\t\t\t\t\tthis.$toast('请先登录小狐狸')\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//this.getBalance(res[0], 11111)\r\n\t\t\t\t\t\t\tconst web3 = new this.Web3(window.web3.currentProvider)\r\n\t\t\t\t\t\t\tconst address = \"0x0cd43FFF2a992E094E829B4b826fC67aBAe2D6E3\"\r\n\t\t\t\t\t\t\t//合约地址\r\n\t\t\t\t\t\t\tconst addressNFT = \"0x250019C9E3EB59Ef6eFAB410408F6c8E246f5A24\"\r\n\t\t\t\t\t\t\tconst myContract = new web3.eth.Contract(Abi, address)\r\n\t\t\t\t\t\t\tconst myContractNft = new web3.eth.Contract(AbiNft, addressNFT)\r\n\t\t\t\t\t\t\t//查询NFT余额\r\n\t\t\t\t\t\t\tmyContract.methods.balanceOf(res[0]).call().then(balance => {\r\n\t\t\t\t\t\t\t\tconsole.log('from balance:' + balance)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t//查询NFT授权\r\n\t\t\t\t\t\t\tmyContract.methods.getApproved(104).call().then(address => {\r\n\t\t\t\t\t\t\t\tconsole.log('from address :' + address)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t//读合约\r\n\t\t\t\t\t\t\t// myContract.methods.approve(\"0xaB069f281a15a3D0C2876F939331F4B63601cDBE\", 106)\r\n\t\t\t\t\t\t\t// \t.send({\r\n\t\t\t\t\t\t\t// \t\tfrom: res[0]\r\n\t\t\t\t\t\t\t// \t}).then(res => {\r\n\t\t\t\t\t\t\t// \t\tconsole.log('from res :' + res)\t\t\r\n\t\t\t\t\t\t\t// \t})\r\n\t\t\t\t\t\t\t//写合约\r\n\t\t\t\t\t\t\t// myContract.methods.safeTransferFrom(res[0],\"0xaB069f281a15a3D0C2876F939331F4B63601cDBE\", 106)\r\n\t\t\t\t\t\t\t// \t.send({\r\n\t\t\t\t\t\t\t// \t\tfrom: res[0]\r\n\t\t\t\t\t\t\t// \t}).then(res => {\r\n\t\t\t\t\t\t\t// \t\tconsole.log('from res :' + res)\r\n\t\t\t\t\t\t\t// \t})\r\n\t\t\t\t\t\t\t//查询归属人\r\n\t\t\t\t\t\t\tmyContract.methods.ownerOf(110).call().then(ownerAddress => {\r\n\t\t\t\t\t\t\t\tconsole.log('from ownerAddress :' + ownerAddress)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t//查询元数据\r\n\t\t\t\t\t\t\tmyContract.methods.tokenURI(110).call().then(urlAddress => {\r\n\t\t\t\t\t\t\t\tconsole.log('from urlAddress :' + urlAddress)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t//NFT下架时间戳\r\n\t\t\t\t\t\t\t// myContractNft.methods.getTimestamp(107).call().then(timesTamp => {\r\n\t\t\t\t\t\t\t// \t//获取当前时间戳单位毫秒\r\n\t\t\t\t\t\t\t// \tvar dataTime = new Date().getTime()\r\n\t\t\t\t\t\t\t// \t//当前时间戳与上架时间（秒）相比\r\n\t\t\t\t\t\t\t// \tconsole.log('from timesTamp :' + timesTamp, dataTime)\r\n\t\t\t\t\t\t\t// \tif (timesTamp*1000 - dataTime > 0) {\r\n\t\t\t\t\t\t\t// \t\t//商品未下架获取商品价格\r\n\t\t\t\t\t\t\t// \t\t//NFT上架价格\r\n\t\t\t\t\t\t\t// \t\tmyContractNft.methods.getPrices(110).call().then(prices => {\r\n\t\t\t\t\t\t\t// \t\t\tconsole.log('from prices :' + prices)\r\n\t\t\t\t\t\t\t// \t\t})\r\n\t\t\t\t\t\t\t// \t\t//购买NFT 获取是否授权（授权在上架商品时操作只需操作一次 获取时间戳 获取价格 \r\n\t\t\t\t\t\t\t// \t\tmyContractNft.methods.buy(110)\r\n\t\t\t\t\t\t\t// \t\t.send({\r\n\t\t\t\t\t\t\t// \t\t\tfrom: res[0],\r\n\t\t\t\t\t\t\t// \t\t\tvalue:web3.utils.toWei('0.1', 'ether')//动态获取商品价格\r\n\t\t\t\t\t\t\t// \t\t}).then(res => {\r\n\t\t\t\t\t\t\t// \t\t\tconsole.log('from res :' + res)\r\n\t\t\t\t\t\t\t// \t\t})\r\n\t\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t\t// \t\tthis.$toast('商品已下架')\r\n\t\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t\t//上架NFT商品\r\n\t\t\t\t\t\t\t//授权nft\r\n\t\t\t\t\t\t\tmyContract.methods.approve(\"0x0cd43FFF2a992E094E829B4b826fC67aBAe2D6E3\", 100)\r\n\t\t\t\t\t\t\t\t.send({\r\n\t\t\t\t\t\t\t\t\tfrom: res[0]\r\n\t\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('from res :' + res)\r\n\t\t\t\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"授权error--->\" + error.code, error.message)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tmyContractNft.methods.sell(108, web3.utils.toWei('0.01', 'ether'), 360000)\r\n\t\t\t\t\t\t\t\t.send({\r\n\t\t\t\t\t\t\t\t\tfrom: res[0]\r\n\t\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('from res :' + res)\r\n\t\t\t\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"上架error--->\" + error.code, error.message)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$toast('请安装 MetaMask,浏览器才能开始使用。');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//商品描述\r\n\t\t\tdes() {\r\n\t\t\t\t//var api ='http://dweb.lindensys.cn/ipns/k51qzi5uqu5divqrok0get110odatax0tv8uqh3forzp1zhoxy7ft7cua188gt/babaofan/110'\r\n\t\t\t\tgetShopDetail('/100').then(res => {\r\n\t\t\t\t\tthis.myShop = res\r\n\t\t\t\t\tthis.shopImage = res.image\r\n\t\t\t\t\tconsole.log(\"数据\", res, 111)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tfootBar\r\n\t\t}\r\n\t}\r\n</script>\r\n<style scoped>\r\n\t.headerbox {\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t\tz-index: 9999;\r\n\t}\r\n\r\n\t.nolist {\r\n\t\tbackground: #F7F7F7;\r\n\t\twidth: 100%;\r\n\t\theight: 90vh;\r\n\t}\r\n\r\n\t.nolist img {\r\n\t\t/* width: 105px; */\r\n\t\theight: 105px;\r\n\t\tmargin-top: 100px;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\t.nolist div:nth-child(1) {\r\n\t\tmargin: 0 auto;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.nolist div:nth-child(2) {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #999999;\r\n\t\tline-height: 36px;\r\n\t\ttext-align: center;\r\n\t\tpadding-bottom: 80px;\r\n\t}\r\n\r\n\t.shopName {\r\n\t\ttext-align: left;\r\n\t\tmargin: 10px auto;\r\n\t\twidth: 300px;\r\n\t}\r\n\r\n\t.shopDes {\r\n\t\twidth: 300px;\r\n\t\ttext-align: left;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t.content-box {\r\n\t\tborder-top: solid 10px #F7F7F7;\r\n\t\tpadding: 10px 16px 50px 16px;\r\n\t\tposition: absolute;\r\n\t\ttop: 45px;\r\n\t}\r\n\r\n\t.content-boxleft {\r\n\t\twidth: 48%;\r\n\t\theight: 235px;\r\n\t\tmargin: 0 0 10px 0;\r\n\t\tdisplay: inline-block;\r\n\t\tbackground: #FFFFFF;\r\n\t\tbox-shadow: 0px 4px 8px 0px rgba(0, 0, 0, 0.1);\r\n\t\tborder-radius: 10px;\r\n\t}\r\n\r\n\t.content-boxleft:nth-child(2n) {\r\n\t\tfloat: right\r\n\t}\r\n\r\n\t.boximg {\r\n\t\twidth: 100%;\r\n\t\theight: 163px;\r\n\t}\r\n\r\n\t.boxleft {\r\n\t\tmargin: 8px 10px;\r\n\t\tfont-size: 12px;\r\n\t}\r\n\r\n\t.boxleftonel {\r\n\t\tcolor: #666666;\r\n\t}\r\n\r\n\t.boxleftoner {\r\n\t\tcolor: #999999;\r\n\t\tfloat: right;\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t.boxlefttwol {\r\n\t\tcolor: #333333;\r\n\t\twidth: 50px;\r\n\t}\r\n\r\n\t.boxlefttwor {\r\n\t\tcolor: #F4BB0B;\r\n\t\tfloat: right;\r\n\t\twidth: 80px;\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t.boxlefttwor img {\r\n\t\twidth: 12px;\r\n\t\theight: 12px;\r\n\t\tvertical-align: top;\r\n\t\tmargin-right: 2px;\r\n\t}\r\n\r\n\t.boxleftthreel {\r\n\t\tcolor: #333333;\r\n\t\twidth: 50px;\r\n\t}\r\n\r\n\t.boxleftthreer {\r\n\t\tcolor: #999999;\r\n\t\tfloat: right;\r\n\t\twidth: 80px;\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t.omit {\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\r\n\t/deep/.van-nav-bar .van-icon {\r\n\t\tcolor: #000000;\r\n\t}\r\n</style>\n"]}]}