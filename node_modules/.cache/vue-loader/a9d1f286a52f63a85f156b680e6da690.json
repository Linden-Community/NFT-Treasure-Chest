{"remainingRequest":"D:\\project\\dapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\dapp\\src\\views\\coin.vue?vue&type=style&index=0&id=70f84d2b&scoped=true&lang=css&","dependencies":[{"path":"D:\\project\\dapp\\src\\views\\coin.vue","mtime":1652263437939},{"path":"D:\\project\\dapp\\node_modules\\css-loader\\index.js","mtime":1650249323990},{"path":"D:\\project\\dapp\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1650249334429},{"path":"D:\\project\\dapp\\node_modules\\postcss-loader\\src\\index.js","mtime":1650249335571},{"path":"D:\\project\\dapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650249328532},{"path":"D:\\project\\dapp\\node_modules\\vue-loader\\lib\\index.js","mtime":1650249334419}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.content {\n\tbackground: #F7F7F7;\n\t/* height: 100vh; */\n}\n\n.contentone {\n\tborder-bottom: 10px solid #F7F7F7;\n\tpadding: 10px 16px;\n\tbackground: #FFFFFF;\n}\n\n.spanone {\n\tfont-size: 16px;\n\tcolor: #333333;\n\tdisplay: block;\n}\n\n.spanone span {\n\tcolor: #DD3F3F;\n}\n\n.spantwo {\n\tmargin: 6px 0;\n}\n\n.spantwo,\n.spanthree {\n\tfont-size: 12px;\n\tcolor: #999999;\n\tdisplay: block;\n}\n\n.divone {\n\tmargin-top: 12px;\n\twidth: 100%;\n\theight: 150px;\n\tbackground: rgba(59, 59, 59, 0.34);\n\tborder-radius: 5px;\n\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\n}\n\n.divonehas {\n\tmargin-top: 12px;\n\twidth: 100%;\n\theight: 150px;\n\tborder-radius: 5px;\n\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\n}\n\n.contenttwo {\n\tpadding: 10px 16px;\n}\n\n.contenttwoo span:nth-child(1) {\n\tfont-size: 13px;\n\tcolor: #333333;\n\tline-height: 20px;\n}\n\n.contenttwoo span:nth-child(2) {\n\tcolor: #DD3F3F;\n}\n\n.contenttwoo div {\n\tmargin: 10px 0;\n\tbackground: #FFFFFF;\n\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\n\tborder-radius: 4px;\n}\n\n.contenttwot span {\n\tfont-size: 13px;\n\tcolor: #333333;\n\tline-height: 20px;\n}\n\n.contenttwot div {\n\tmargin: 10px 0;\n\tbackground: #FFFFFF;\n\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\n\tborder-radius: 4px;\n}\n\n.contenttwotho {\n\tmargin: 12px 0;\n}\n\n.contenttwotho span:nth-child(1) {\n\tfont-size: 13px;\n\tcolor: #333333;\n\tfont-weight: 500;\n}\n\n.contenttwotho span:nth-child(2) {\n\tfont-size: 13px;\n\tcolor: #666666;\n\tfloat: right;\n\tfont-weight: 400;\n}\n\n.contenttwotht span:nth-child(1) {\n\tfont-size: 13px;\n\tfont-weight: 500;\n\tcolor: #333333;\n}\n\n.contenttwotht span:nth-child(2) {\n\tfont-size: 13px;\n\tcolor: #666666;\n\tfont-weight: 400;\n\tfloat: right;\n}\n\n.loadingbox {\n\twidth: 100%;\n\tposition: fixed;\n\ttop: 50%;\n\ttext-align: center;\n}\n\n.mint {\n\twidth: 170px;\n\theight: 44px;\n\tmargin: 55px auto 100px auto;\n\ttext-align: center;\n\tline-height: 44px;\n\tbackground: #FADD5C;\n\tborder-radius: 4px;\n}\n\n/deep/.van-uploader__upload {\n\tbackground-color: transparent;\n\twidth: 100%;\n\theight: 150px;\n}\n\n/deep/.van-uploader {\n\twidth: 100%;\n\theight: 150px;\n}\n\n/deep/.van-uploader__preview-image {\n\twidth: 100%;\n\theight: 150px;\n}\n\n/deep/.van-uploader__preview {\n\tmargin: 0 auto;\n}\n",{"version":3,"sources":["coin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiMA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"coin.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div class=\"content\">\r\n\t\t<van-nav-bar title=\"Mint quantity\" />\r\n\t\t<div class=\"contentone\">\r\n\t\t\t<span class=\"spanone\">Upload work<span>*</span></span>\r\n\t\t\t<span class=\"spantwo\">Supported formats: JPG、JPEG、PNG</span>\r\n\t\t\t<span class=\"spanthree\">Maximum supported: 10MB</span>\r\n\t\t\t<div :class=\"imageData==''?'divone':'divonehas'\">\r\n\t\t\t\t<van-uploader v-model=\"fileList\" multiple :max-count=\"1\" :max-size=\"10*1024*1024\" @oversize=\"onOversize\"\r\n\t\t\t\t\t:before-read=\"beforeRead\" :before-delete=\"delImg\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"contenttwo\">\r\n\t\t\t<div class=\"contenttwoo\">\r\n\t\t\t\t<span>Work title</span><span>*</span>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<van-field v-model=\"title\" center clearable label=\"\" placeholder=\"Please enter work title\"\r\n\t\t\t\t\t\tmaxlength=\"20\">\r\n\t\t\t\t\t</van-field>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"contenttwot\">\r\n\t\t\t\t<span>Description of the work</span>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<van-cell-group inset>\r\n\t\t\t\t\t\t<van-field v-model=\"description\" autosize rows=\"3\" type=\"textarea\" maxlength=\"100\"\r\n\t\t\t\t\t\t\tplaceholder=\"Please enter a description of the work\" show-word-limit\r\n\t\t\t\t\t\t\t@keydown=\"checkEnter\" />\r\n\t\t\t\t\t</van-cell-group>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"contenttwoth\">\r\n\t\t\t\t<div class=\"contenttwotho\"><span>Mint quantity</span><span>1</span></div>\r\n\t\t\t\t<div class=\"contenttwotht\"><span>Blockchain</span><span>BNB</span></div>\r\n\t\t\t\t<div class=\"mint\" @click=\"mintBtn\">Mint</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<van-loading v-show=\"pageLoading\" type=\"spinner\" size=\"24px\" class=\"loadingbox\" color=\"#0094ff\" />\r\n\t\t<foot-bar v-if=\"$route.meta.isMenu\"></foot-bar>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport footBar from '../components/footBar'\r\n\timport Vue from 'vue'\r\n\timport {\r\n\t\tUploader,\r\n\t\tField,\r\n\t\tCellGroup,\r\n\t\tNavBar,\r\n\t\tLoading\r\n\t} from 'vant'\r\n\tVue.use(Uploader).use(Field).use(CellGroup).use(NavBar).use(Loading)\r\n\timport {\r\n\t\tsetCoin\r\n\t} from \"../api\";\r\n\timport AbiNft from '../json/AbiNft.js'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tfootBar\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdescription: '',\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tfileList: [],\r\n\t\t\t\ttokenId: '',\r\n\t\t\t\timageData: '',\r\n\t\t\t\tpageLoading: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tcheckEnter(e) {\r\n\t\t\t\tvar et = e || window.event;\r\n\t\t\t var keycode = et.charCode || et.keyCode;\r\n\t\t\t\tif (keycode == 13) {\r\n\t\t\t\t\tif (window.event) {\r\n\t\t\t\t\t\twindow.event.returnValue = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\te.preventDefault(); //for firefox\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonOversize(file) {\r\n\t\t\t\tthis.$toast('Image size cannot exceed 10MB')\r\n\t\t\t},\r\n\t\t\tdelImg(file, detail) {\r\n\t\t\t\tthis.fileList.splice(detail.index, 1)\r\n\t\t\t\tthis.imageData = ''\r\n\t\t\t},\r\n\t\t\tbeforeRead(file) {\r\n\r\n\t\t\t\tvar fileType = file.type.toLowerCase()\r\n\t\t\t\tif (fileType == 'image/jpeg' || fileType == 'image/png' || fileType == 'image/jpeg') {\r\n\t\t\t\t\tlet FormDatas = new FormData()\r\n\t\t\t\t\tFormDatas.append('file', file)\r\n\t\t\t\t\tthis.$http({\r\n\t\t\t\t\t\turl: 'https://csg.lindensys.cn/poss/v1/testnet/add',\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Content-Type': 'multipart/form-data',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\t\tdata: FormDatas,\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tconsole.log(res.data.Hash)\r\n\t\t\t\t\t\tthis.imageData = 'https://csg.lindensys.cn/poss/v1/testnet/ipfs/' + res.data.Hash\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn true\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$toast('Uploading this format is not supported')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//获取19位tokenid\r\n\t\t\tgetCurrentTime() {\r\n\t\t\t\tlet yy = new Date().getFullYear();\r\n\t\t\t\tlet mm = new Date().getMonth() + 1 < 10 ? \"0\" + `${new Date().getMonth() + 1}` : new Date().getMonth() + 1;\r\n\t\t\t\tlet dd = new Date().getDate() < 10 ? '0' + new Date().getDate() : new Date().getDate();\r\n\t\t\t\tlet hh = new Date().getHours() < 10 ? '0' + new Date().getHours() : new Date().getHours();\r\n\t\t\t\tlet mf = new Date().getMinutes() < 10 ? '0' + new Date().getMinutes() : new Date().getMinutes();\r\n\t\t\t\tlet ss = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds() : new Date().getSeconds();\r\n\t\t\t\tthis.tokenId = `${yy}${mm}${dd}` + hh + mf + ss;\r\n\t\t\t\tvar random = new Array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9);\r\n\t\t\t\tvar num = '';\r\n\t\t\t\tfor (var i = 0; i < 5; i++) {\r\n\t\t\t\t\tnum += Math.floor(Math.random() * 10);\r\n\t\t\t\t}\r\n\t\t\t\tthis.tokenId = this.tokenId + num\r\n\t\t\t},\r\n\t\t\tmintBtn() {\r\n\t\t\t\tconsole.log(this.imageData, 2222)\r\n\t\t\t\tthis.getCurrentTime()\r\n\t\t\t\tif (this.title == '') {\r\n\t\t\t\t\tthis.$toast('Please enter the title')\r\n\t\t\t\t} else if (this.imageData == '') {\r\n\t\t\t\t\tthis.$toast('Please enter the image')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst params = {\r\n\t\t\t\t\t\ttokenId: this.tokenId, //年月日时分秒+5位随机数\r\n\t\t\t\t\t\timage: this.imageData,\r\n\t\t\t\t\t\tnftId: 'babaofan',\r\n\t\t\t\t\t\tname: this.title,\r\n\t\t\t\t\t\tdescription: this.description,\r\n\t\t\t\t\t\t//后期需要\r\n\t\t\t\t\t\t//nftId // image// externalUrl\t// attributes// backgroundColor\t // animationUrl // youtubeUrl // createTime/ updateTime\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetCoin(params).then(res => {\r\n\t\t\t\t\t\tif (res.code == \"200\") {\r\n\t\t\t\t\t\t\tthis.safeMint(res.result.cid)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$toast(res.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsafeMint(uri) {\r\n\t\t\t\tconst web3 = new this.Web3(window.web3.currentProvider)\r\n\t\t\t\t//合约地址\r\n\t\t\t\tconst addressNFT = \"0x990CfeB4d7EC56c95a08881896630AA6F92D04Dd\"\r\n\t\t\t\tconst myContractNft = new web3.eth.Contract(AbiNft, addressNFT)\r\n\t\t\t\tthis.pageLoading = true\r\n\t\t\t\tmyContractNft.methods.safeMint(sessionStorage.getItem(\"myAddress\"), this.tokenId, uri)\r\n\t\t\t\t\t.send({\r\n\t\t\t\t\t\tfrom: sessionStorage.getItem(\"myAddress\")\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tif (JSON.stringify(res.status) == 'true') {\r\n\t\t\t\t\t\t\tthis.$toast('Successful coinage')\r\n\t\t\t\t\t\t\tconsole.log(\"success\")\r\n\t\t\t\t\t\t\t//刷新\r\n\t\t\t\t\t\t\t//location.reload()\r\n\t\t\t\t\t\t\tthis.pageLoading = false\r\n\t\t\t\t\t\t\t//跳转\r\n\t\t\t\t\t\t\tthis.$router.push('me')\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$toast(res.message)\r\n\t\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\tthis.pageLoading = false\r\n\t\t\t\t\t\tthis.$toast(error.message)\r\n\t\t\t\t\t\t// if (JSON.stringify(error.status) == 'true') {\r\n\t\t\t\t\t\t// \tthis.$toast(error.message)\r\n\t\t\t\t\t\t// \tconsole.log(error.message)\r\n\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t// \tthis.$toast(error.message)\r\n\t\t\t\t\t\t// \tconsole.log(error.message)\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n<style scoped>\r\n\t.content {\r\n\t\tbackground: #F7F7F7;\r\n\t\t/* height: 100vh; */\r\n\t}\r\n\r\n\t.contentone {\r\n\t\tborder-bottom: 10px solid #F7F7F7;\r\n\t\tpadding: 10px 16px;\r\n\t\tbackground: #FFFFFF;\r\n\t}\r\n\r\n\t.spanone {\r\n\t\tfont-size: 16px;\r\n\t\tcolor: #333333;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.spanone span {\r\n\t\tcolor: #DD3F3F;\r\n\t}\r\n\r\n\t.spantwo {\r\n\t\tmargin: 6px 0;\r\n\t}\r\n\r\n\t.spantwo,\r\n\t.spanthree {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #999999;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.divone {\r\n\t\tmargin-top: 12px;\r\n\t\twidth: 100%;\r\n\t\theight: 150px;\r\n\t\tbackground: rgba(59, 59, 59, 0.34);\r\n\t\tborder-radius: 5px;\r\n\t\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\r\n\t}\r\n\r\n\t.divonehas {\r\n\t\tmargin-top: 12px;\r\n\t\twidth: 100%;\r\n\t\theight: 150px;\r\n\t\tborder-radius: 5px;\r\n\t\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\r\n\t}\r\n\r\n\t.contenttwo {\r\n\t\tpadding: 10px 16px;\r\n\t}\r\n\r\n\t.contenttwoo span:nth-child(1) {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #333333;\r\n\t\tline-height: 20px;\r\n\t}\r\n\r\n\t.contenttwoo span:nth-child(2) {\r\n\t\tcolor: #DD3F3F;\r\n\t}\r\n\r\n\t.contenttwoo div {\r\n\t\tmargin: 10px 0;\r\n\t\tbackground: #FFFFFF;\r\n\t\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t.contenttwot span {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #333333;\r\n\t\tline-height: 20px;\r\n\t}\r\n\r\n\t.contenttwot div {\r\n\t\tmargin: 10px 0;\r\n\t\tbackground: #FFFFFF;\r\n\t\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t.contenttwotho {\r\n\t\tmargin: 12px 0;\r\n\t}\r\n\r\n\t.contenttwotho span:nth-child(1) {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #333333;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.contenttwotho span:nth-child(2) {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #666666;\r\n\t\tfloat: right;\r\n\t\tfont-weight: 400;\r\n\t}\r\n\r\n\t.contenttwotht span:nth-child(1) {\r\n\t\tfont-size: 13px;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.contenttwotht span:nth-child(2) {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #666666;\r\n\t\tfont-weight: 400;\r\n\t\tfloat: right;\r\n\t}\r\n\r\n\t.loadingbox {\r\n\t\twidth: 100%;\r\n\t\tposition: fixed;\r\n\t\ttop: 50%;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.mint {\r\n\t\twidth: 170px;\r\n\t\theight: 44px;\r\n\t\tmargin: 55px auto 100px auto;\r\n\t\ttext-align: center;\r\n\t\tline-height: 44px;\r\n\t\tbackground: #FADD5C;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t/deep/.van-uploader__upload {\r\n\t\tbackground-color: transparent;\r\n\t\twidth: 100%;\r\n\t\theight: 150px;\r\n\t}\r\n\r\n\t/deep/.van-uploader {\r\n\t\twidth: 100%;\r\n\t\theight: 150px;\r\n\t}\r\n\r\n\t/deep/.van-uploader__preview-image {\r\n\t\twidth: 100%;\r\n\t\theight: 150px;\r\n\t}\r\n\r\n\t/deep/.van-uploader__preview {\r\n\t\tmargin: 0 auto;\r\n\t}\r\n</style>\n"]}]}