{"remainingRequest":"D:\\project\\dapp\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\dapp\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\project\\dapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\dapp\\src\\views\\coin.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\dapp\\src\\views\\coin.vue","mtime":1652430243837},{"path":"D:\\project\\dapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650249328532},{"path":"D:\\project\\dapp\\node_modules\\babel-loader\\lib\\index.js","mtime":1650249335774},{"path":"D:\\project\\dapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650249328532},{"path":"D:\\project\\dapp\\node_modules\\vue-loader\\lib\\index.js","mtime":1650249334419}],"contextDependencies":[],"result":["import \"vant/es/uploader/style\";\nimport _Uploader from \"vant/es/uploader\";\nimport \"vant/es/field/style\";\nimport _Field from \"vant/es/field\";\nimport \"vant/es/cell-group/style\";\nimport _CellGroup from \"vant/es/cell-group\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"vant/es/loading/style\";\nimport _Loading from \"vant/es/loading\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport footBar from \"../components/footBar\";\nimport Vue from 'vue';\nVue.use(_Uploader).use(_Field).use(_CellGroup).use(_NavBar).use(_Loading);\nimport { setCoin } from \"../api\";\nimport AbiNft from \"../json/AbiNft.js\";\nexport default {\n  components: {\n    footBar: footBar\n  },\n  data: function data() {\n    return {\n      description: '',\n      title: '',\n      fileList: [],\n      tokenId: '',\n      imageData: '',\n      pageLoading: false\n    };\n  },\n  mounted: function mounted() {},\n  methods: {\n    checkEnter: function checkEnter(e) {\n      var et = e || window.event;\n      var keycode = et.charCode || et.keyCode;\n\n      if (keycode == 13) {\n        if (window.event) {\n          window.event.returnValue = false;\n        } else {\n          e.preventDefault(); //for firefox\n        }\n      }\n    },\n    onOversize: function onOversize(file) {\n      this.$toast('Image size cannot exceed 10MB');\n    },\n    delImg: function delImg(file, detail) {\n      this.fileList.splice(detail.index, 1);\n      this.imageData = '';\n    },\n    beforeRead: function beforeRead(file) {\n      var _this = this;\n\n      var fileType = file.type.toLowerCase();\n\n      if (fileType == 'image/jpeg' || fileType == 'image/png' || fileType == 'image/jpeg') {\n        var FormDatas = new FormData();\n        FormDatas.append('file', file);\n        this.$http({\n          url: 'https://csg.lindensys.cn/poss/v1/testnet/add',\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          },\n          method: 'post',\n          data: FormDatas\n        }).then(function (res) {\n          console.log(res.data.Hash);\n          _this.imageData = 'https://csg.lindensys.cn/poss/v1/testnet/ipfs/' + res.data.Hash;\n        });\n        return true;\n      } else {\n        this.$toast('Uploading this format is not supported');\n      }\n    },\n    //获取19位tokenid\n    getCurrentTime: function getCurrentTime() {\n      var yy = new Date().getFullYear();\n      var mm = new Date().getMonth() + 1 < 10 ? \"0\" + \"\".concat(new Date().getMonth() + 1) : new Date().getMonth() + 1;\n      var dd = new Date().getDate() < 10 ? '0' + new Date().getDate() : new Date().getDate();\n      var hh = new Date().getHours() < 10 ? '0' + new Date().getHours() : new Date().getHours();\n      var mf = new Date().getMinutes() < 10 ? '0' + new Date().getMinutes() : new Date().getMinutes();\n      var ss = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds() : new Date().getSeconds();\n      this.tokenId = \"\".concat(yy).concat(mm).concat(dd) + hh + mf + ss;\n      var random = new Array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9);\n      var num = '';\n\n      for (var i = 0; i < 5; i++) {\n        num += Math.floor(Math.random() * 10);\n      }\n\n      this.tokenId = this.tokenId + num;\n    },\n    mintBtn: function mintBtn() {\n      var _this2 = this;\n\n      console.log(this.imageData, 2222);\n      this.getCurrentTime();\n\n      if (this.title == '') {\n        this.$toast('Please enter the title');\n      } else if (this.imageData == '') {\n        this.$toast('Please enter the image');\n      } else {\n        var params = {\n          tokenId: this.tokenId,\n          //年月日时分秒+5位随机数\n          image: this.imageData,\n          nftId: 'babaofan',\n          name: this.title,\n          description: this.description //后期需要\n          //nftId // image// externalUrl\t// attributes// backgroundColor\t // animationUrl // youtubeUrl // createTime/ updateTime\n\n        };\n        setCoin(params).then(function (res) {\n          if (res.code == \"200\") {\n            _this2.safeMint(res.result.cid);\n          } else {\n            _this2.$toast(res.message);\n          }\n        });\n      }\n    },\n    safeMint: function safeMint(uri) {\n      var _this3 = this;\n\n      var web3 = new this.Web3(window.web3.currentProvider); //合约地址\n      //测试\n\n      var addressNFT = \"0x990CfeB4d7EC56c95a08881896630AA6F92D04Dd\"; //正式\n      //const addressNFT = \"0x1f9887C6F9Bd49952A68BBbFFDDF99334B6fF823\"\n\n      var myContractNft = new web3.eth.Contract(AbiNft, addressNFT);\n      this.pageLoading = true;\n      myContractNft.methods.safeMint(sessionStorage.getItem(\"myAddress\"), this.tokenId, uri).send({\n        from: sessionStorage.getItem(\"myAddress\")\n      }).then(function (res) {\n        if (JSON.stringify(res.status) == 'true') {\n          _this3.$toast('Successful coinage');\n\n          console.log(\"success\"); //刷新\n          //location.reload()\n\n          _this3.pageLoading = false; //跳转\n\n          setTimeout(function () {\n            _this3.$router.push('me');\n          }, 2000);\n        } else {\n          _this3.$toast(res.message);\n\n          console.log(res.message);\n        }\n      }).catch(function (error) {\n        _this3.pageLoading = false;\n\n        _this3.$toast(error.message); // if (JSON.stringify(error.status) == 'true') {\n        // \tthis.$toast(error.message)\n        // \tconsole.log(error.message)\n        // } else {\n        // \tthis.$toast(error.message)\n        // \tconsole.log(error.message)\n        // }\n\n      });\n    }\n  }\n};",{"version":3,"sources":["coin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"content\">\r\n\t\t<van-nav-bar title=\"Mint quantity\" />\r\n\t\t<div class=\"contentone\">\r\n\t\t\t<span class=\"spanone\">Upload work<span>*</span></span>\r\n\t\t\t<span class=\"spantwo\">Supported formats: JPG、JPEG、PNG</span>\r\n\t\t\t<span class=\"spanthree\">Maximum supported: 10MB</span>\r\n\t\t\t<div :class=\"imageData==''?'divone':'divonehas'\">\r\n\t\t\t\t<van-uploader v-model=\"fileList\" multiple :max-count=\"1\" :max-size=\"10*1024*1024\" @oversize=\"onOversize\"\r\n\t\t\t\t\t:before-read=\"beforeRead\" :before-delete=\"delImg\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"contenttwo\">\r\n\t\t\t<div class=\"contenttwoo\">\r\n\t\t\t\t<span>Work title</span><span>*</span>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<van-field v-model=\"title\" center clearable label=\"\" placeholder=\"Please enter work title\"\r\n\t\t\t\t\t\tmaxlength=\"20\">\r\n\t\t\t\t\t</van-field>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"contenttwot\">\r\n\t\t\t\t<span>Description of the work</span>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<van-cell-group inset>\r\n\t\t\t\t\t\t<van-field v-model=\"description\" autosize rows=\"3\" type=\"textarea\" maxlength=\"100\"\r\n\t\t\t\t\t\t\tplaceholder=\"Please enter a description of the work\" show-word-limit\r\n\t\t\t\t\t\t\t@keydown=\"checkEnter\" />\r\n\t\t\t\t\t</van-cell-group>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"contenttwoth\">\r\n\t\t\t\t<div class=\"contenttwotho\"><span>Mint quantity</span><span>1</span></div>\r\n\t\t\t\t<div class=\"contenttwotht\"><span>Blockchain</span><span>BNB</span></div>\r\n\t\t\t\t<div class=\"mint\" @click=\"mintBtn\" v-throttle=\"3000\">Mint</div>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<van-loading v-show=\"pageLoading\" type=\"spinner\" size=\"24px\" class=\"loadingbox\" color=\"#0094ff\" />\r\n\t\t<foot-bar v-if=\"$route.meta.isMenu\"></foot-bar>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport footBar from '../components/footBar'\r\n\timport Vue from 'vue'\r\n\timport {\r\n\t\tUploader,\r\n\t\tField,\r\n\t\tCellGroup,\r\n\t\tNavBar,\r\n\t\tLoading\r\n\t} from 'vant'\r\n\tVue.use(Uploader).use(Field).use(CellGroup).use(NavBar).use(Loading)\r\n\timport {\r\n\t\tsetCoin\r\n\t} from \"../api\";\r\n\timport AbiNft from '../json/AbiNft.js'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tfootBar\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdescription: '',\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tfileList: [],\r\n\t\t\t\ttokenId: '',\r\n\t\t\t\timageData: '',\r\n\t\t\t\tpageLoading: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {},\r\n\t\tmethods: {\r\n\t\t\tcheckEnter(e) {\r\n\t\t\t\tvar et = e || window.event;\r\n\t\t\t\tvar keycode = et.charCode || et.keyCode;\r\n\t\t\t\tif (keycode == 13) {\r\n\t\t\t\t\tif (window.event) {\r\n\t\t\t\t\t\twindow.event.returnValue = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\te.preventDefault(); //for firefox\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonOversize(file) {\r\n\t\t\t\tthis.$toast('Image size cannot exceed 10MB')\r\n\t\t\t},\r\n\t\t\tdelImg(file, detail) {\r\n\t\t\t\tthis.fileList.splice(detail.index, 1)\r\n\t\t\t\tthis.imageData = ''\r\n\t\t\t},\r\n\t\t\tbeforeRead(file) {\r\n\r\n\t\t\t\tvar fileType = file.type.toLowerCase()\r\n\t\t\t\tif (fileType == 'image/jpeg' || fileType == 'image/png' || fileType == 'image/jpeg') {\r\n\t\t\t\t\tlet FormDatas = new FormData()\r\n\t\t\t\t\tFormDatas.append('file', file)\r\n\t\t\t\t\tthis.$http({\r\n\t\t\t\t\t\turl: 'https://csg.lindensys.cn/poss/v1/testnet/add',\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Content-Type': 'multipart/form-data',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\t\tdata: FormDatas,\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tconsole.log(res.data.Hash)\r\n\t\t\t\t\t\tthis.imageData = 'https://csg.lindensys.cn/poss/v1/testnet/ipfs/' + res.data.Hash\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn true\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$toast('Uploading this format is not supported')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//获取19位tokenid\r\n\t\t\tgetCurrentTime() {\r\n\t\t\t\tlet yy = new Date().getFullYear();\r\n\t\t\t\tlet mm = new Date().getMonth() + 1 < 10 ? \"0\" + `${new Date().getMonth() + 1}` : new Date().getMonth() + 1;\r\n\t\t\t\tlet dd = new Date().getDate() < 10 ? '0' + new Date().getDate() : new Date().getDate();\r\n\t\t\t\tlet hh = new Date().getHours() < 10 ? '0' + new Date().getHours() : new Date().getHours();\r\n\t\t\t\tlet mf = new Date().getMinutes() < 10 ? '0' + new Date().getMinutes() : new Date().getMinutes();\r\n\t\t\t\tlet ss = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds() : new Date().getSeconds();\r\n\t\t\t\tthis.tokenId = `${yy}${mm}${dd}` + hh + mf + ss;\r\n\t\t\t\tvar random = new Array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9);\r\n\t\t\t\tvar num = '';\r\n\t\t\t\tfor (var i = 0; i < 5; i++) {\r\n\t\t\t\t\tnum += Math.floor(Math.random() * 10);\r\n\t\t\t\t}\r\n\t\t\t\tthis.tokenId = this.tokenId + num\r\n\t\t\t},\r\n\t\t\tmintBtn() {\r\n\t\t\t\tconsole.log(this.imageData, 2222)\r\n\t\t\t\tthis.getCurrentTime()\r\n\t\t\t\tif (this.title == '') {\r\n\t\t\t\t\tthis.$toast('Please enter the title')\r\n\t\t\t\t} else if (this.imageData == '') {\r\n\t\t\t\t\tthis.$toast('Please enter the image')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst params = {\r\n\t\t\t\t\t\ttokenId: this.tokenId, //年月日时分秒+5位随机数\r\n\t\t\t\t\t\timage: this.imageData,\r\n\t\t\t\t\t\tnftId: 'babaofan',\r\n\t\t\t\t\t\tname: this.title,\r\n\t\t\t\t\t\tdescription: this.description,\r\n\t\t\t\t\t\t//后期需要\r\n\t\t\t\t\t\t//nftId // image// externalUrl\t// attributes// backgroundColor\t // animationUrl // youtubeUrl // createTime/ updateTime\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetCoin(params).then(res => {\r\n\t\t\t\t\t\tif (res.code == \"200\") {\r\n\t\t\t\t\t\t\tthis.safeMint(res.result.cid)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$toast(res.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsafeMint(uri) {\r\n\t\t\t\tconst web3 = new this.Web3(window.web3.currentProvider)\r\n\t\t\t\t//合约地址\r\n\t\t\t\t//测试\r\n\t\t\t\tconst addressNFT = \"0x990CfeB4d7EC56c95a08881896630AA6F92D04Dd\"\r\n\t\t\t\t//正式\r\n\t\t\t\t//const addressNFT = \"0x1f9887C6F9Bd49952A68BBbFFDDF99334B6fF823\"\r\n\t\t\t\tconst myContractNft = new web3.eth.Contract(AbiNft, addressNFT)\r\n\t\t\t\tthis.pageLoading = true\r\n\t\t\t\tmyContractNft.methods.safeMint(sessionStorage.getItem(\"myAddress\"), this.tokenId, uri)\r\n\t\t\t\t\t.send({\r\n\t\t\t\t\t\tfrom: sessionStorage.getItem(\"myAddress\")\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tif (JSON.stringify(res.status) == 'true') {\r\n\t\t\t\t\t\t\tthis.$toast('Successful coinage')\r\n\t\t\t\t\t\t\tconsole.log(\"success\")\r\n\t\t\t\t\t\t\t//刷新\r\n\t\t\t\t\t\t\t//location.reload()\r\n\t\t\t\t\t\t\tthis.pageLoading = false\r\n\t\t\t\t\t\t\t//跳转\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.$router.push('me')\r\n\t\t\t\t\t\t\t}, 2000)\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$toast(res.message)\r\n\t\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\tthis.pageLoading = false\r\n\t\t\t\t\t\tthis.$toast(error.message)\r\n\t\t\t\t\t\t// if (JSON.stringify(error.status) == 'true') {\r\n\t\t\t\t\t\t// \tthis.$toast(error.message)\r\n\t\t\t\t\t\t// \tconsole.log(error.message)\r\n\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t// \tthis.$toast(error.message)\r\n\t\t\t\t\t\t// \tconsole.log(error.message)\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n<style scoped>\r\n\t.content {\r\n\t\tbackground: #F7F7F7;\r\n\t\t/* height: 100vh; */\r\n\t}\r\n\r\n\t.contentone {\r\n\t\tborder-bottom: 10px solid #F7F7F7;\r\n\t\tpadding: 10px 16px;\r\n\t\tbackground: #FFFFFF;\r\n\t}\r\n\r\n\t.spanone {\r\n\t\tfont-size: 16px;\r\n\t\tcolor: #333333;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.spanone span {\r\n\t\tcolor: #DD3F3F;\r\n\t}\r\n\r\n\t.spantwo {\r\n\t\tmargin: 6px 0;\r\n\t}\r\n\r\n\t.spantwo,\r\n\t.spanthree {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #999999;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.divone {\r\n\t\tmargin-top: 12px;\r\n\t\twidth: 100%;\r\n\t\t/* height: 150px; */\r\n\t\tbackground: rgba(59, 59, 59, 0.34);\r\n\t\tborder-radius: 5px;\r\n\t\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\r\n\t}\r\n\r\n\t.divonehas {\r\n\t\tmargin-top: 12px;\r\n\t\twidth: 100%;\r\n\t\t/* height: 150px; */\r\n\t\tborder-radius: 5px;\r\n\t\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\r\n\t}\r\n\r\n\t.contenttwo {\r\n\t\tpadding: 10px 16px;\r\n\t}\r\n\r\n\t.contenttwoo span:nth-child(1) {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #333333;\r\n\t\tline-height: 20px;\r\n\t}\r\n\r\n\t.contenttwoo span:nth-child(2) {\r\n\t\tcolor: #DD3F3F;\r\n\t}\r\n\r\n\t.contenttwoo div {\r\n\t\tmargin: 10px 0;\r\n\t\tbackground: #FFFFFF;\r\n\t\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t.contenttwot span {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #333333;\r\n\t\tline-height: 20px;\r\n\t}\r\n\r\n\t.contenttwot div {\r\n\t\tmargin: 10px 0;\r\n\t\tbackground: #FFFFFF;\r\n\t\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t.contenttwotho {\r\n\t\tmargin: 12px 0;\r\n\t}\r\n\r\n\t.contenttwotho span:nth-child(1) {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #333333;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.contenttwotho span:nth-child(2) {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #666666;\r\n\t\tfloat: right;\r\n\t\tfont-weight: 400;\r\n\t}\r\n\r\n\t.contenttwotht span:nth-child(1) {\r\n\t\tfont-size: 13px;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.contenttwotht span:nth-child(2) {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #666666;\r\n\t\tfont-weight: 400;\r\n\t\tfloat: right;\r\n\t}\r\n\r\n\t.loadingbox {\r\n\t\twidth: 100%;\r\n\t\tposition: fixed;\r\n\t\ttop: 50%;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.mint {\r\n\t\twidth: 170px;\r\n\t\theight: 44px;\r\n\t\tmargin: 55px auto 100px auto;\r\n\t\ttext-align: center;\r\n\t\tline-height: 44px;\r\n\t\tbackground: #FADD5C;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t/deep/.van-uploader__upload {\r\n\t\tbackground-color: transparent;\r\n\t\twidth: 100%;\r\n\t\t/* height: 150px; */\r\n\t}\r\n\r\n\t/deep/.van-uploader {\r\n\t\twidth: 100%;\r\n\t\t/* height: 150px; */\r\n\t}\r\n\r\n\t/deep/.van-uploader__preview-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t/deep/.van-uploader__preview {\r\n\t\tmargin: 0 auto;\r\n\t}\r\n</style>\n"],"sourceRoot":"src/views"}]}