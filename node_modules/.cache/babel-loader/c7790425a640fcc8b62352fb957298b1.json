{"remainingRequest":"D:\\project\\dapp\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\dapp\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\project\\dapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\dapp\\src\\views\\sellDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\dapp\\src\\views\\sellDetail.vue","mtime":1652666137876},{"path":"D:\\project\\dapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650249328532},{"path":"D:\\project\\dapp\\node_modules\\babel-loader\\lib\\index.js","mtime":1650249335774},{"path":"D:\\project\\dapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650249328532},{"path":"D:\\project\\dapp\\node_modules\\vue-loader\\lib\\index.js","mtime":1650249334419}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"vant/es/collapse/style\";\nimport _Collapse from \"vant/es/collapse\";\nimport \"vant/es/collapse-item/style\";\nimport _CollapseItem from \"vant/es/collapse-item\";\nimport \"vant/es/cell/style\";\nimport _Cell from \"vant/es/cell\";\nimport \"vant/es/field/style\";\nimport _Field from \"vant/es/field\";\nimport \"vant/es/cell-group/style\";\nimport _CellGroup from \"vant/es/cell-group\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"vant/es/picker/style\";\nimport _Picker from \"vant/es/picker\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"vant/es/loading/style\";\nimport _Loading from \"vant/es/loading\";\nimport \"vant/es/dialog/style\";\nimport _Dialog from \"vant/es/dialog\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from 'vue';\nVue.use(_Collapse).use(_CollapseItem).use(_Cell).use(_Field).use(_CellGroup).use(_Icon).use(_Picker).use(_NavBar).use(_Loading).use(_Dialog);\nimport { getNft } from \"../api\";\nimport Abi from \"../json/Abi.js\";\nimport AbiNft from \"../json/AbiNft.js\";\nimport BigNumber from \"bignumber.js\";\nimport { addDate } from \"../api/date.js\";\nexport default {\n  data: function data() {\n    return {\n      activeNames: [0],\n      amount: '',\n      detaillist: [],\n      tipboxshow: false,\n      minDate: new Date(2010, 0, 1),\n      maxDate: new Date(2010, 0, 31),\n      columns: [],\n      dateboxshow: false,\n      //日期弹框快捷方式\n      mydate: '1',\n      mychangedate: '',\n      shopid: '',\n      time: parseInt(new Date().getTime() / 1000),\n      //默认一天\n      mytime: parseInt(new Date().getTime() / 1000) + 87000,\n      //默认一天\n      copyIds: '',\n      mytokenId: '',\n      pageLoading: false,\n      //测试\n      address: '0x1A3B441D42F733fbC55774456D62081CAd462c3C',\n      addressNFT: '0x990CfeB4d7EC56c95a08881896630AA6F92D04Dd' //正式\n      // address:'0xAcD1fD491Eb468f93209F2e63cCFdc9926af7731',\n      // addressNFT:'0x1f9887C6F9Bd49952A68BBbFFDDF99334B6fF823',\n\n    };\n  },\n  mounted: function mounted() {\n    // sessionStorage.setItem('shopdelpage', 'shopdelpage1')\n    this.shopid = this.$route.query.userId;\n    this.detailNft(this.$route.query.userId); //商品详情\n\n    this.putdate(); //获取处理时间\n\n    this.mychangedate = addDate(new Date(), parseInt(0)) + ' - ' + addDate(new Date(), parseInt(1)) + ' ( 1 Day ) '; //默认时间\n  },\n  methods: {\n    inputblur: function inputblur() {\n      if (this.amount == '' || this.amount < 0.0001 || this.amount > 9999.9999) {\n        this.$toast('Please enter a number between 0.0001-9999.9999');\n      }\n    },\n    inputchange: function inputchange(e) {\n      var val = e.target.value; //不能出现001等\n\n      val = val.replace(/^0+\\./g, '0.');\n      val = val.match(/^0+[1-9]+/) ? val = val.replace(/^0+/g, '') : val; //先把非数字的都替换掉，除了数字和.\n\n      val = val.replace(/[^\\d.]/g, \"\"); //保证只有出现一个.而没有多个.\n\n      val = val.replace(/\\.{2,}/g, \".\"); //必须保证第一个为数字而不是.\n\n      val = val.replace(/^\\./g, \"\"); //保证.只出现一次，而不能出现两次以上\n\n      val = val.replace(\".\", \"$#$\").replace(/\\./g, \"\").replace(\"$#$\", \".\"); //只能输入两个小数\n\n      val = val.replace(/^(\\-)*(\\d+)\\.(\\d\\d\\d\\d).*$/, '$1$2.$3');\n      this.amount = val;\n    },\n    gootheraddress: function gootheraddress(address) {\n      this.$router.push({\n        name: 'otherList',\n        query: {\n          address: address\n        }\n      });\n    },\n    //复制\n    copyclick: function copyclick(txt) {\n      var _this = this;\n\n      this.$copyText(txt).then(function () {\n        _this.$toast('Successfully copied to clipboard');\n      }).catch(function () {\n        _this.$toast('Copy failed');\n      });\n    },\n    //大弹框\n    showdatebox: function showdatebox() {\n      this.dateboxshow = !this.dateboxshow;\n    },\n    icontip: function icontip() {\n      this.tipboxshow = !this.tipboxshow;\n    },\n    putdate: function putdate() {\n      for (var i = 1; i <= 180; i++) {\n        this.mychangedate = addDate(new Date(), parseInt(i));\n        var newdate = i + ' Day   ' + this.mychangedate;\n        this.columns.push(newdate);\n      }\n    },\n    onChange: function onChange(value, index) {\n      this.mychangedate = addDate(new Date(), parseInt(0)) + ' - ' + index.split(' ')[4] + ' (' + index.split(' ')[0] + index.split(' ')[1] + ')';\n      this.mytime = parseInt(new Date().getTime() / 1000) + index.split(' ')[0] * 24 * 60 * 60 + 600;\n      console.log(\"\\u5F53\\u524D\\u503C: \".concat(value, \", \\u5F53\\u524D\\u7D22\\u5F15: \").concat(index), this.mytime);\n    },\n    nochoosedate: function nochoosedate() {\n      this.dateboxshow = false;\n    },\n    //时间选择按钮\n    choosedatesub: function choosedatesub() {\n      this.dateboxshow = false;\n    },\n    //商品详情\n    detailNft: function detailNft(userId) {\n      var _this2 = this;\n\n      var params = {\n        id: userId\n      };\n      getNft(params).then(function (res) {\n        if (res.code == \"200\") {\n          _this2.detaillist = res.result;\n          _this2.copyIds = res.result.tokenId;\n          _this2.amount = res.result.price == '' ? '' : res.result.price; //this.empower()\n        } else {\n          _this2.$toast(res.message);\n        }\n      });\n    },\n    //授权\n    empower: function empower() {\n      var _this3 = this;\n\n      if (this.amount == '' || this.amount < 0.0001 || this.amount > 9999.9999) {\n        this.$toast('Please enter a number between 0.0001-9999.9999');\n      } else {\n        if (window.ethereum) {\n          window.ethereum.enable().then(function (res) {\n            if (!res[0]) {\n              _this3.$toast('Please log in to little fox first');\n            } else {\n              var web3 = new _this3.Web3(window.web3.currentProvider); //NFT合约地址\n\n              var myContractNft = new web3.eth.Contract(AbiNft, _this3.addressNFT); //授权nft\n\n              _this3.mytokenId = new BigNumber(_this3.detaillist.tokenId);\n              myContractNft.methods.getApproved(_this3.mytokenId).call().then(function (approve) {\n                console.log('from approve :' + approve);\n\n                if (approve !== _this3.address) {\n                  _this3.pageLoading = true;\n                  myContractNft.methods.approve(_this3.address, _this3.mytokenId).send({\n                    from: res[0]\n                  }).then(function (res) {\n                    console.log('from res :' + res);\n\n                    if (JSON.stringify(res.status) == 'true') {\n                      _Dialog.alert({\n                        message: 'Authorization is successful！ Please upload',\n                        theme: 'round-button',\n                        confirmButtonText: 'Listed',\n                        confirmButtonColor: '#FADD5C',\n                        width: '200'\n                      }).then(function () {\n                        // on close\n                        //this.$toast('Authorization succeeded')\n                        console.log(\"success\"); //刷新页面\n                        //location.reload()\n\n                        _this3.pageLoading = false;\n\n                        _this3.sellsub();\n                      });\n                    } else {\n                      _this3.$toast(res.message);\n\n                      console.log(res.message);\n                    }\n                  }).catch(function (error) {\n                    _this3.pageLoading = false;\n\n                    _this3.$toast(error.message);\n\n                    console.log(\"授权error--->\" + error.code, error.message);\n                  });\n                } else {\n                  console.log(11);\n\n                  _this3.sellsub();\n                }\n              });\n            }\n          });\n        } else {\n          this.$toast('Please install metamask before the browser can be used.');\n        }\n      }\n    },\n    //上架\n    sellsub: function sellsub() {\n      var _this4 = this;\n\n      if (this.amount == '' || this.amount < 0.0001 || this.amount > 9999.9999) {\n        this.$toast('Please enter a number between 0.0001-9999.9999');\n      } else {\n        if (window.ethereum) {\n          window.ethereum.enable().then(function (res) {\n            if (!res[0]) {\n              _this4.$toast('Please log in to little fox first');\n            } else {\n              console.log(parseInt(new Date().getTime()));\n\n              if (parseInt(new Date().getTime() / 1000) - _this4.time >= 600) {\n                _this4.$toast(\"The page timed out！ Please refresh the current page\");\n              } else {\n                var web3 = new _this4.Web3(window.web3.currentProvider); //交易所合约地址\n                //const address = \"0x0e0eb3Aac0FDCb5Cff2F92d7E5D632224F7EC29c\"\n\n                var myContract = new web3.eth.Contract(Abi, _this4.address); //授权nft\n\n                _this4.mytokenId = new BigNumber(_this4.detaillist.tokenId);\n                _this4.pageLoading = true; //上架NFT商品（商品id 金额 时间）\n\n                myContract.methods.sell(_this4.detaillist.contract, _this4.mytokenId, BigNumber(web3.utils.toWei(_this4.amount.toString(), 'ether')), _this4.mytime).send({\n                  from: res[0]\n                }).then(function (res) {\n                  console.log('from res :' + res);\n\n                  if (JSON.stringify(res.status) == 'true') {\n                    _this4.$toast('Successful launch');\n\n                    console.log(\"success\");\n                    _this4.pageLoading = false; //跳转页面\n\n                    _this4.$router.push('/');\n                  } else {\n                    _this4.$toast(res.message);\n\n                    console.log(res.message);\n                  }\n                }).catch(function (error) {\n                  _this4.pageLoading = false;\n\n                  _this4.$toast(error.message);\n\n                  console.log(\"上架error--->\" + error.code, error.message);\n                });\n              }\n            }\n          });\n        } else {\n          this.$toast('Please install metamask before the browser can be used.');\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["sellDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"wrap\">\r\n\t\t<div class=\"headerbox\">\r\n\t\t\t<van-nav-bar title=\"NFT details\" left-arrow @click-left=\"$router.go(-1)\" />\r\n\t\t</div>\r\n\t\t<div class=\"contentone\">\r\n\t\t\t<div class=\"onecell\"><span class=\"onecelll\">Minted by</span><span\r\n\t\t\t\t\t@click=\"gootheraddress(detaillist.creator)\"\r\n\t\t\t\t\tclass=\"onecellr\">{{detaillist.creator==null?'creator':detaillist.creator | ellipsis}}</span></div>\r\n\t\t\t<div class=\"twocell\"><span class=\"twocelll\">{{detaillist.name==null?'name':detaillist.name}}</span>\r\n\t\t\t<!-- <span class=\"twocellr\">#{{detaillist.tokenId}}</span> -->\r\n\t\t\t</div>\r\n\t\t\t<div class=\"threecell\">\r\n\t\t\t\t<img v-if=\"detaillist.image==null\" src=\"../assets/images/zw.png\" />\r\n\t\t\t\t<img v-else :src=\"detaillist.image\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"fourcell\">\r\n\t\t\t\t<div class=\"fourcelll\">\r\n\t\t\t\t\t<span class=\"fourcellone\">Owned by</span>\r\n\t\t\t\t\t<span class=\"fourcelltwo\"\r\n\t\t\t\t\t\t@click=\"gootheraddress(detaillist.owner)\">{{detaillist.owner==null?'detaillistowner':detaillist.owner | ellipsis }}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"fourcellr\">{{detaillist.offSheftTime}}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"contenttwo\">\r\n\t\t\t<div class=\"contenttwo1\">\r\n\t\t\t\t<div class=\"contenttwooo\">\r\n\t\t\t\t\t<div class=\"contenttwooot\"><span class=\"contenttwoooto\">Current price</span><span\r\n\t\t\t\t\t\t\tclass=\"contenttwooott\">Fixed price</span></div>\r\n\t\t\t\t\t<div class=\"contenttwooob\">\r\n\t\t\t\t\t\t<van-field v-model=\"amount\" type=\"number\" placeholder=\"Please enter the amount\" @change=\"inputchange\" @blur='inputblur' maxlength=\"9\"/>\r\n\t\t\t\t\t\t<span class=\"coinCompany\">BNB</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"contenttwoot\">\r\n\t\t\t\t\t<div class=\"contenttwooot\"><span class=\"contenttwoooto\">Listing cycle</span></div>\r\n\t\t\t\t\t<div class=\"contenttwooob\">\r\n\t\t\t\t\t\t<van-field v-model=\"mychangedate\" placeholder=\"Please enter the amount\" disabled />\r\n\t\t\t\t\t\t<img src=\"../assets/images/timeicon.png\" class=\"dateimg\" @click=\"showdatebox\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"datatimebox\" v-show=\"dateboxshow\">\r\n\t\t\t\t\t\t<div class=\"datatimeboxtt\">\r\n\t\t\t\t\t\t\t<span>Select shelf cycle</span>\r\n\t\t\t\t\t\t\t<span  @click=\"nochoosedate\"><van-icon name=\"cross\" /></span>\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<van-picker title=\"标题\" :columns=\"columns\" :default-index=\"0\" @change=\"onChange\" />\r\n\t\t\t\t\t\t<div class=\"datatimeboxbf\" @click=\"choosedatesub\">Confirm</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"contenttwoo\">\r\n\t\t\t\t<span>Cost</span>\r\n\t\t\t\t<van-icon name=\"info-o\" @click=\"icontip\" />\r\n\t\t\t\t<span v-show=\"tipboxshow\" class=\"tipbox\">Listing is free. Once sold, the following fees will be\r\n\t\t\t\t\tdeducted.</span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"contenttwot\">\r\n\t\t\t\t<div class=\"contenttwotl\">Service charge</div>\r\n\t\t\t\t<div class=\"contenttwotr\">2%</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"contenttwote\">\r\n\t\t\t\t<van-collapse v-model=\"activeNames\">\r\n\t\t\t\t\t<van-collapse-item title=\"Introduction to the works\" name=\"0\" class='mycell'>\r\n\t\t\t\t\t\t<div class=\"descriptionbox\">{{detaillist.description==''?'No details yet':detaillist.description}}</div>\r\n\t\t\t\t\t</van-collapse-item>\r\n\t\t\t\t\t<van-collapse-item title=\"Details of the works\" name=\"1\" class='mycell'>\r\n\t\t\t\t\t\t<van-cell title=\"Contract address\">\r\n\t\t\t\t\t\t\t<template #right-icon>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclass=\"copyadd\">{{detaillist.contract==null?'detaillistcontract':detaillist.contract | ellipsis }}</span>\r\n\t\t\t\t\t\t\t\t<img class=\"copyimg\" @click=\"copyclick(detaillist.contract)\"\r\n\t\t\t\t\t\t\t\t\tsrc=\"../assets/images/copy.png\">\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</van-cell>\r\n\t\t\t\t\t\t<van-cell title=\"Token ID\">\r\n\t\t\t\t\t\t\t<template #right-icon>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclass=\"copyadd\">{{detaillist.tokenId==null?'detaillisttokenId':detaillist.tokenId | ellipsis }}</span>\r\n\t\t\t\t\t\t\t\t<img class=\"copyimg\" @click=\"copyclick(copyIds)\" src=\"../assets/images/copy.png\">\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</van-cell>\r\n\r\n\t\t\t\t\t\t<van-cell title=\"Token standard\" value=\"ERC-721\" />\r\n\t\t\t\t\t\t<van-cell title=\"Blockchain\" value=\"BNB\" />\r\n\t\t\t\t\t</van-collapse-item>\r\n\t\t\t\t</van-collapse>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"sell\" @click=\"empower\" v-throttle=\"3000\">Sell</div>\r\n\t\t<van-loading v-show=\"pageLoading\" type=\"spinner\" size=\"24px\" class=\"loadingbox\" color=\"#0094ff\"/>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport Vue from 'vue'\r\n\timport {\r\n\t\tCollapse,\r\n\t\tCollapseItem,\r\n\t\tCell,\r\n\t\tField,\r\n\t\tCellGroup,\r\n\t\tIcon,\r\n\t\tPicker,\r\n\t\tNavBar,\r\n\t\tLoading,\r\n\t\tDialog \r\n\t} from 'vant'\r\n\tVue.use(Collapse).use(CollapseItem).use(Cell).use(Field).use(CellGroup).use(Icon).use(Picker).use(NavBar).use(Loading).use(Dialog)\r\n\timport {\r\n\t\tgetNft\r\n\t} from \"../api\";\r\n\timport Abi from '../json/Abi.js'\r\n\timport AbiNft from '../json/AbiNft.js'\r\n\timport BigNumber from \"bignumber.js\";\r\n\timport {\r\n\t\taddDate\r\n\t} from '../api/date.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tactiveNames: [0],\r\n\t\t\t\tamount:'',\r\n\t\t\t\tdetaillist: [],\r\n\t\t\t\ttipboxshow: false,\r\n\t\t\t\tminDate: new Date(2010, 0, 1),\r\n\t\t\t\tmaxDate: new Date(2010, 0, 31),\r\n\t\t\t\tcolumns: [],\r\n\t\t\t\tdateboxshow: false, //日期弹框快捷方式\r\n\t\t\t\tmydate: '1',\r\n\t\t\t\tmychangedate: '',\r\n\t\t\t\tshopid: '',\r\n\t\t\t\ttime: parseInt(new Date().getTime()/1000), //默认一天\r\n\t\t\t\tmytime: parseInt(new Date().getTime()/1000)+87000, //默认一天\r\n\t\t\t\tcopyIds: '',\r\n\t\t\t\tmytokenId: '',\r\n\t\t\t\tpageLoading:false,\r\n\t\t\t\t//测试\r\n\t\t\t\taddress:'0x1A3B441D42F733fbC55774456D62081CAd462c3C',\r\n\t\t\t\taddressNFT:'0x990CfeB4d7EC56c95a08881896630AA6F92D04Dd',\r\n\t\t\t\t//正式\r\n\t\t\t\t// address:'0xAcD1fD491Eb468f93209F2e63cCFdc9926af7731',\r\n\t\t\t\t// addressNFT:'0x1f9887C6F9Bd49952A68BBbFFDDF99334B6fF823',\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// sessionStorage.setItem('shopdelpage', 'shopdelpage1')\r\n\t\t\tthis.shopid = this.$route.query.userId\r\n\t\t\tthis.detailNft(this.$route.query.userId) //商品详情\r\n\t\t\tthis.putdate() //获取处理时间\r\n\t\t\tthis.mychangedate = addDate(new Date, parseInt(0)) + ' - ' + addDate(new Date, parseInt(1)) +\r\n\t\t\t\t' ( 1 Day ) ' //默认时间\r\n\t\r\n\t\t},\r\n\t\tmethods: {\t\r\n\t\t\tinputblur(){\r\n\t\t\t\tif(this.amount == '' || this.amount < 0.0001 || this.amount > 9999.9999) {\r\n\t\t\t\t\tthis.$toast('Please enter a number between 0.0001-9999.9999')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinputchange(e) {\r\n\t\t\t\tvar val = e.target.value\r\n\t\t\t\t//不能出现001等\r\n\t\t\t\tval = val.replace(/^0+\\./g,'0.');\r\n\t\t\t\tval = val.match(/^0+[1-9]+/)?val=val.replace(/^0+/g,''):val;\r\n\t\t\t\t//先把非数字的都替换掉，除了数字和.\r\n\t\t\t\tval = val.replace(/[^\\d.]/g,\"\");\r\n\t\t\t    //保证只有出现一个.而没有多个.\r\n\t\t\t    val = val.replace(/\\.{2,}/g,\".\");\r\n\t\t\t    //必须保证第一个为数字而不是.\r\n\t\t\t    val = val.replace(/^\\./g,\"\");\r\n\t\t\t    //保证.只出现一次，而不能出现两次以上\r\n\t\t\t    val = val.replace(\".\",\"$#$\").replace(/\\./g,\"\").replace(\"$#$\",\".\");\r\n\t\t\t    //只能输入两个小数\r\n\t\t\t    val = val.replace(/^(\\-)*(\\d+)\\.(\\d\\d\\d\\d).*$/,'$1$2.$3');\r\n\t\t\t\tthis.amount = val\r\n\t\t\t},\r\n\t\t\tgootheraddress(address) {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: 'otherList',\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\taddress: address\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//复制\r\n\t\t\tcopyclick(txt) {\r\n\t\t\t\tthis.$copyText(txt).then(() => {\r\n\t\t\t\t\tthis.$toast('Successfully copied to clipboard')\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.$toast('Copy failed')\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//大弹框\r\n\t\t\tshowdatebox() {\r\n\t\t\t\tthis.dateboxshow = !this.dateboxshow\r\n\t\t\t},\r\n\t\t\ticontip() {\r\n\t\t\t\tthis.tipboxshow = !this.tipboxshow\r\n\t\t\t},\r\n\t\t\tputdate() {\r\n\t\t\t\tfor (var i = 1; i <= 180; i++) {\r\n\t\t\t\t\tthis.mychangedate = addDate(new Date, parseInt(i))\r\n\t\t\t\t\tvar newdate = i + ' Day   ' + this.mychangedate\r\n\t\t\t\t\tthis.columns.push(newdate)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonChange(value, index) {\r\n\t\t\t\tthis.mychangedate = addDate(new Date, parseInt(0)) + ' - ' + index.split(' ')[4] + ' (' + index.split(' ')[\r\n\t\t\t\t\t0] + index.split(' ')[1] + ')'\r\n\t\t\t\tthis.mytime = parseInt(new Date().getTime()/1000) + index.split(' ')[0] * 24 * 60 * 60+600\r\n\t\t\t\tconsole.log(`当前值: ${value}, 当前索引: ${index}`, this.mytime);\r\n\t\t\t},\r\n\t\t\tnochoosedate(){\r\n\t\t\t\tthis.dateboxshow = false\r\n\t\t\t},\r\n\t\t\t//时间选择按钮\r\n\t\t\tchoosedatesub() {\r\n\t\t\t\tthis.dateboxshow = false\r\n\t\t\t},\r\n\t\t\t//商品详情\r\n\t\t\tdetailNft(userId) {\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tid: userId,\r\n\t\t\t\t}\r\n\t\t\t\tgetNft(params).then(res => {\r\n\t\t\t\t\tif (res.code == \"200\") {\r\n\t\t\t\t\t\tthis.detaillist = res.result\r\n\t\t\t\t\t\tthis.copyIds = res.result.tokenId\r\n\t\t\t\t\t\tthis.amount = res.result.price==''?'':res.result.price\r\n\t\t\t\t\t\t//this.empower()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$toast(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//授权\r\n\t\t\tempower() {\r\n\t\t\t\tif(this.amount == '' || this.amount < 0.0001 || this.amount > 9999.9999) {\r\n\t\t\t\t\tthis.$toast('Please enter a number between 0.0001-9999.9999')\r\n\t\t\t\t}else{\r\n\t\t\t\tif (window.ethereum) {\r\n\t\t\t\t\twindow.ethereum.enable().then((res) => {\r\n\t\t\t\t\t\tif (!res[0]) {\r\n\t\t\t\t\t\t\tthis.$toast('Please log in to little fox first')\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst web3 = new this.Web3(window.web3.currentProvider)\r\n\t\t\t\t\t\t\t//NFT合约地址\r\n\t\t\t\t\t\t\tconst myContractNft = new web3.eth.Contract(AbiNft, this.addressNFT)\r\n\t\t\t\t\t\t\t//授权nft\r\n\t\t\t\t\t\t\tthis.mytokenId = new BigNumber(this.detaillist.tokenId)\r\n\t\t\t\t\t\t\tmyContractNft.methods.getApproved(this.mytokenId).call().then(\r\n\t\t\t\t\t\t\t\tapprove => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('from approve :' + approve)\r\n\t\t\t\t\t\t\t\t\tif(approve!==this.address){\r\n\t\t\t\t\t\t\t\t\t\tthis.pageLoading = true\r\n\t\t\t\t\t\t\t\t\t\tmyContractNft.methods.approve(this.address, this.mytokenId)\r\n\t\t\t\t\t\t\t\t\t\t\t.send({\r\n\t\t\t\t\t\t\t\t\t\t\t\tfrom: res[0]\r\n\t\t\t\t\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('from res :' + res)\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (JSON.stringify(res.status) == 'true') {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tDialog.alert({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Authorization is successful！ Please upload',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttheme: 'round-button',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfirmButtonText:'Listed',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfirmButtonColor:'#FADD5C',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth:'200'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  // on close\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  //this.$toast('Authorization succeeded')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  console.log(\"success\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  //刷新页面\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  //location.reload()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  this.pageLoading = false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  this.sellsub()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$toast(res.message)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.pageLoading = false\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.$toast(error.message)\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"授权error--->\" + error.code, error.message)\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(11)\r\n\t\t\t\t\t\t\t\t\t\tthis.sellsub()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$toast('Please install metamask before the browser can be used.');\r\n\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//上架\r\n\t\t\tsellsub() {\r\n\t\t\t\tif (this.amount == '' || this.amount < 0.0001 || this.amount > 9999.9999) {\r\n\t\t\t\t\tthis.$toast('Please enter a number between 0.0001-9999.9999')\r\n\t\t\t\t}else  {\r\n\t\t\t\t\tif (window.ethereum) {\r\n\t\t\t\t\t\twindow.ethereum.enable().then((res) => {\r\n\t\t\t\t\t\t\tif (!res[0]) {\r\n\t\t\t\t\t\t\t\tthis.$toast('Please log in to little fox first')\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.log(parseInt(new Date().getTime()))\r\n\t\t\t\t\t\t\t\tif(parseInt(new Date().getTime()/1000) - this.time>=600){\r\n\t\t\t\t\t\t\t\t\tthis.$toast(\"The page timed out！ Please refresh the current page\")\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tconst web3 = new this.Web3(window.web3.currentProvider)\r\n\t\t\t\t\t\t\t\t//交易所合约地址\r\n\t\t\t\t\t\t\t\t//const address = \"0x0e0eb3Aac0FDCb5Cff2F92d7E5D632224F7EC29c\"\r\n\t\t\t\t\t\t\t\tconst myContract = new web3.eth.Contract(Abi, this.address)\r\n\t\t\t\t\t\t\t\t//授权nft\r\n\t\t\t\t\t\t\t\tthis.mytokenId =new BigNumber(this.detaillist.tokenId)\r\n\t\t\t\t\t\t\t\tthis.pageLoading = true\r\n\t\t\t\t\t\t\t\t//上架NFT商品（商品id 金额 时间）\r\n\t\t\t\t\t\t\t\tmyContract.methods.sell(this.detaillist.contract,this.mytokenId, BigNumber(web3.utils.toWei(this.amount.toString(),\r\n\t\t\t\t\t\t\t\t\t\t\t'ether')),\r\n\t\t\t\t\t\t\t\t\t\tthis.mytime)\r\n\t\t\t\t\t\t\t\t\t.send({\r\n\t\t\t\t\t\t\t\t\t\tfrom: res[0]\r\n\t\t\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('from res :' + res)\r\n\t\t\t\t\t\t\t\t\t\tif (JSON.stringify(res.status) == 'true') {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.$toast('Successful launch')\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"success\")\r\n\t\t\t\t\t\t\t\t\t\t\tthis.pageLoading = false\r\n\t\t\t\t\t\t\t\t\t\t\t//跳转页面\r\n\t\t\t\t\t\t\t\t\t\t\tthis.$router.push('/') \r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.$toast(res.message)\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\t\t\t\t\tthis.pageLoading = false\r\n\t\t\t\t\t\t\t\t\t\tthis.$toast(error.message)\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"上架error--->\" + error.code, error.message)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$toast('Please install metamask before the browser can be used.');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n</script>\r\n<style scoped>\r\n\t.headerbox {\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t\ttop: 0;\r\n\t\tborder-bottom: 10px solid #F7F7F7;\r\n\t}\r\n\r\n\t.onecelll {\r\n\t\theight: 14px;\r\n\t\tfont-size: 14px;\r\n\t\tfont-family: SourceHanSansCN-Regular, SourceHanSansCN;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #666666;\r\n\t\tline-height: 21px;\r\n\t}\r\n\r\n\t.onecellr {\r\n\t\tfloat: right;\r\n\t\ttext-align: right;\r\n\t\tcolor: #FF5603;\r\n\t\tfont-size: 12px;\r\n\t\twidth: 200px;\r\n\t}\r\n\r\n\t.warp {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.contentone {\r\n\t\tborder-bottom: 10px solid #F7F7F7;\r\n\t\tpadding: 20px 16px 10px 16px;\r\n\t\tmargin-top: 45px;\r\n\t}\r\n\r\n\t.onecell {\r\n\t\theight: 14px;\r\n\t\tfont-size: 14px;\r\n\t\tfont-family: SourceHanSansCN-Regular, SourceHanSansCN;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #666666;\r\n\t\tline-height: 21px;\r\n\t}\r\n\r\n\t.twocell {\r\n\t\tmargin: 8px 0;\r\n\t}\r\n\r\n\t.twocelll {\r\n\t\tmax-width: 100%;\r\n\t\tfont-size: 18px;\r\n\t\tfont-family: SourceHanSansCN-Medium, SourceHanSansCN;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #333333;\r\n\t\t/* overflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap; */\r\n\t\tdisplay: inline-block;\r\n\t\tpadding: 5px 0;\r\n\t}\r\n\r\n\t.twocellr {\r\n\t\tfloat: right;\r\n\t\t/* margin-top: 3px; */\r\n\t}\r\n\r\n\t.threecell {\r\n\t\twidth: 100%;\r\n\t}\r\n\t.imgobject{\r\n\t\tobject-fit:cover;\r\n\t\tobject-position:50% 50%;\r\n\t}\r\n\r\n\t.threecell img {\r\n\t\twidth: 100%;\r\n\t\t/* height: 300px; */\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t.dateimg,\r\n\t.coinCompany {\r\n\t\t/* width: 18px; */\r\n\t\theight: 18px;\r\n\t\tposition: absolute;\r\n\t\tright: 20px;\r\n\t\ttop: 0;\r\n\t\tmargin: 15px 0;\r\n\t}\r\n\r\n\t.coinCompany {\r\n\t\tposition: absolute;\r\n\t\tright: 20px;\r\n\t\ttop: 0;\r\n\t\tmargin: 10px 0;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #333333;\r\n\t\tline-height: 18px;\r\n\t}\r\n\r\n\t.fourcell {\r\n\t\tmargin: 0 auto;\r\n\t\theight: 35px;\r\n\t\tbackground: #FFFFFF;\r\n\t\tfont-size: 12px;\r\n\t\tfont-weight: 400;\r\n\t\tline-height: 35px;\r\n\t\tfont-family: SourceHanSansCN-Regular, SourceHanSansCN;\r\n\t}\r\n\r\n\t.fourcelll {\r\n\t\twidth: 200px;\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\r\n\t.fourcellone {\r\n\t\tcolor: #666666;\r\n\t}\r\n\r\n\t.fourcelltwo {\r\n\t\tmargin-left: 5px;\r\n\t\tcolor: #FF5603;\r\n\t}\r\n\r\n\t.fourcellr {\r\n\t\tcolor: #999999;\r\n\t\tfloat: right;\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\r\n\t.contenttwo {\r\n\t\tbackground: #FFFFFF;\r\n\t}\r\n\r\n\t.contenttwoo {\r\n\t\tpadding: 10px 20px 0 20px;\r\n\t}\r\n\r\n\t.contenttwoo span:nth-child(1) {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #000000;\r\n\t\tmargin-right: 2px;\r\n\t\tvertical-align: top;\r\n\t}\r\n\r\n\t.tipbox {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 260px;\r\n\t\theight: 35px;\r\n\t\tbackground: #FFF9F1;\r\n\t\tbox-shadow: 0px 1px 4px 1px rgba(0, 0, 0, 0.1);\r\n\t\tborder-radius: 4px;\r\n\t\tfont-size: 11px;\r\n\t\tcolor: #333333;\r\n\t\tline-height: 15px;\r\n\t\tpadding: 2px 7px;\r\n\t\tmargin-left: 2px;\r\n\t}\r\n\r\n\t/deep/.van-icon {\r\n\t\tvertical-align: top;\r\n\t\tmargin-top: -2px;\r\n\t}\r\n\r\n\t.contenttwot {\r\n\t\theight: 50px;\r\n\t\tline-height: 50px;\r\n\t\tdisplay: lex;\r\n\t\tborder-bottom: 0.026667rem solid #D8D8D8;\r\n\t\tpadding: 0px 20px;\r\n\t}\r\n\r\n\t.contenttwote {\r\n\t\t/* padding: 0px 5px; */\r\n\t}\r\n\r\n\t.contenttwotl {\r\n\t\tdisplay: inline;\r\n\t\twidth: 350px;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #666666;\r\n\t}\r\n\r\n\r\n\t.contenttwotr {\r\n\t\tfloat: right;\r\n\t\theight: 27px;\r\n\t\tline-height: 27px;\r\n\t\tcolor: #333333;\r\n\t\tfont-size: 12px;\r\n\t\tmargin-top: 10px;\r\n\t}\r\n.descriptionbox{\r\n\tpadding: 10px 20px;\r\n\tbackground: #F7F7F7;\r\n\tfont-size: 12px;\r\n\tcolor: #666666;\r\n}\r\n\t.mycell {\r\n\t\t/* background-color: #FFFFFF; */\r\n\t}\r\n\r\n\t/deep/ .van-collapse-item__content {\r\n\t\tpadding: 0;\r\n\t}\r\n\r\n\t/deep/.van-cell {\r\n\t\tfont-size: 12px;\r\n\t}\r\n\r\n\t/deep/.van-cell::after {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\r\n\t/deep/.van-field__control {\r\n\t\tcolor: #999999;\r\n\t}\r\n\r\n\t/deep/.van-collapse-item--border::after {\r\n\t\tborder-top: none;\r\n\t}\r\n\r\n\t/deep/.van-hairline--top-bottom::after,\r\n\t.van-hairline-unset--top-bottom::after {\r\n\t\tborder-width: 0;\r\n\t}\r\n\r\n\t.van-col {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 11px;\r\n\t\tcolor: #666666;\r\n\t}\r\n\r\n\t/deep/.van-button--default {\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t.contenttwo1 {\r\n\t\tpadding: 12px 20px;\r\n\t\tborder-bottom: 0.026667rem solid #D8D8D8;\r\n\t}\r\n\r\n\t.contenttwooot {\r\n\t\tmargin-bottom: 10px;\r\n\t\tmargin-top: 10px;\r\n\t}\r\n\r\n\t.contenttwooot {\r\n\t\tmargin-bottom: 16px;\r\n\t}\r\n\r\n\t.contenttwoooto {\r\n\t\theight: 26px;\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.contenttwooott {\r\n\t\tfloat: right;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #999999;\r\n\t}\r\n\r\n\t.datatimebox {\r\n\t\tz-index: 9999;\r\n\t\tposition: fixed;\r\n\t\tbottom: 0px;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tmargin: 0 auto;\r\n\t\tbackground: #FFFFFF;\r\n\t\tbox-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.15);\r\n\t\tborder-radius: 8px;\r\n\t\tpadding: 0 15px 5px 15px;\r\n\t}\r\n\r\n\t.contenttwooob {\r\n\t\tposition: relative;\r\n\t\tbackground: #FFFFFF;\r\n\t\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t.copyadd {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #999999;\r\n\t\twidth: 150px;\r\n\t\ttext-align: right;\r\n\t\tmargin-right: 5px;\r\n\t}\r\n\r\n\t.copyimg {\r\n\t\twidth: 16px;\r\n\t\theight: 16px;\r\n\t\tmargin-top: 5px;\r\n\t}\r\n\t.datatimeboxtt{\r\n\t\tmargin: 20px 0;\r\n\t}\r\n\r\n\t.datatimeboxtt span:nth-child(1){\r\n\t\tfont-size: 20px;\r\n\t\tcolor: #333333\r\n\t}\r\n\t\t\r\n\t.datatimeboxtt span:nth-child(2){\r\n\t\tfloat: right;\r\n\t}\r\n\t.datatimeboxbf {\r\n\t\tbackground: #FADD5C;\r\n\t\twidth: 180px;\r\n\t\theight: 31px;\r\n\t\tline-height: 31px;\r\n\t\tborder-radius: 4px;\r\n\t\ttext-align: center;\r\n\t\tmargin: 5px auto;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #000000;\r\n\t}\r\n\r\n\t.sell {\r\n\t\tbackground: #FADD5C;\r\n\t\twidth: 180px;\r\n\t\theight: 44px;\r\n\t\tline-height: 44px;\r\n\t\tborder-radius: 4px;\r\n\t\ttext-align: center;\r\n\t\tmargin: 5px auto;\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #000000;\r\n\t}\r\n\t.loadingbox{\r\n\t\twidth: 100%;\r\n\t\tposition: fixed;\r\n\t\ttop:50%;\r\n\t\ttext-align: center;\r\n\t}\r\n\t/deep/.van-nav-bar .van-icon {\r\n\t\tcolor: #000000;\r\n\t}\r\n</style>\n"],"sourceRoot":"src/views"}]}