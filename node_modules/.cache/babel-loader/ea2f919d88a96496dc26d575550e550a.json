{"remainingRequest":"D:\\project\\dapp\\nft\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\dapp\\nft\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\project\\dapp\\nft\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\dapp\\nft\\src\\views\\sellDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\dapp\\nft\\src\\views\\sellDetail.vue","mtime":1650252598772},{"path":"D:\\project\\dapp\\nft\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650249328532},{"path":"D:\\project\\dapp\\nft\\node_modules\\babel-loader\\lib\\index.js","mtime":1650249335774},{"path":"D:\\project\\dapp\\nft\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650249328532},{"path":"D:\\project\\dapp\\nft\\node_modules\\vue-loader\\lib\\index.js","mtime":1650249334419}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"vant/es/collapse/style\";\nimport _Collapse from \"vant/es/collapse\";\nimport \"vant/es/collapse-item/style\";\nimport _CollapseItem from \"vant/es/collapse-item\";\nimport \"vant/es/cell/style\";\nimport _Cell from \"vant/es/cell\";\nimport \"vant/es/field/style\";\nimport _Field from \"vant/es/field\";\nimport \"vant/es/cell-group/style\";\nimport _CellGroup from \"vant/es/cell-group\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"vant/es/picker/style\";\nimport _Picker from \"vant/es/picker\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from 'vue';\nVue.use(_Collapse).use(_CollapseItem).use(_Cell).use(_Field).use(_CellGroup).use(_Icon).use(_Picker).use(_NavBar);\nimport { getNft } from \"../api\";\nimport Abi from \"../json/Abi.js\";\nimport AbiNft from \"../json/AbiNft.js\";\nimport { addDate } from \"../api/date.js\";\nexport default {\n  data: function data() {\n    return {\n      activeNames: [0],\n      amount: '',\n      detaillist: [],\n      tipboxshow: false,\n      //daylist: ['1', '3', '7', '30', '50', '180', ],\n      //currentDate: true,\n      minDate: new Date(2010, 0, 1),\n      maxDate: new Date(2010, 0, 31),\n      columns: [],\n      //nowIndex: 0,\n      //datetimeshow: false,//日期组件\n      dateboxshow: false,\n      //日期弹框快捷方式\n      mydate: '1',\n      mychangedate: '',\n      shopid: '',\n      mytime: ''\n    };\n  },\n  mounted: function mounted() {\n    this.shopid = this.$route.params.userId;\n    this.detailNft(this.$route.params.userId);\n    this.putdate();\n    this.mychangedate = addDate(new Date(), parseInt(0)) + ' - ' + addDate(new Date(), parseInt(0)) + ' ( 1 Day ) ';\n  },\n  methods: {\n    gootheraddress: function gootheraddress(address) {\n      console.log(address);\n      this.$router.push({\n        name: 'otherList',\n        params: {\n          address: address\n        }\n      });\n    },\n    //复制\n    copyclick: function copyclick() {},\n    // checked(index,item) {\n    // \tthis.nowIndex = index\n    // \tthis.mydate = item\n    // },\n    //大弹框\n    showdatebox: function showdatebox() {\n      this.dateboxshow = !this.dateboxshow;\n    },\n    //时间弹框\n    // choosedatetime() {\n    // \tthis.datetimeshow = true\n    // },\n    icontip: function icontip() {\n      this.tipboxshow = !this.tipboxshow;\n    },\n    putdate: function putdate() {\n      for (var i = 1; i <= 180; i++) {\n        this.mychangedate = addDate(new Date(), parseInt(i));\n        var newdate = i + ' Day   ' + this.mychangedate;\n        this.columns.push(newdate);\n      }\n    },\n    onChange: function onChange(value, index) {\n      this.mychangedate = addDate(new Date(), parseInt(0)) + ' - ' + index.split(' ')[4] + ' (' + index.split(' ')[0] + index.split(' ')[1] + ')';\n      this.mytime = index.split(' ')[0] * 24 * 60 * 60;\n      console.log(\"\\u5F53\\u524D\\u503C: \".concat(value, \", \\u5F53\\u524D\\u7D22\\u5F15: \").concat(index), this.mytime);\n    },\n    //时间选择按钮\n    choosedatesub: function choosedatesub() {\n      this.dateboxshow = false;\n    },\n    //商品详情\n    detailNft: function detailNft(userId) {\n      var _this = this;\n\n      var params = {\n        id: userId\n      };\n      getNft(params).then(function (res) {\n        if (res.code == \"200\") {\n          _this.detaillist = res.result;\n        } else {\n          _this.$toast(res.message);\n        }\n      });\n    },\n    //上架\n    sellsub: function sellsub() {\n      var _this2 = this;\n\n      if (this.amount == '' || this.amount < 0.0001 || this.amount > 9999.9999) {\n        this.$toast('输入不正确，请重新输入');\n      } else {\n        if (window.ethereum) {\n          window.ethereum.enable().then(function (res) {\n            if (!res[0]) {\n              _this2.$toast('请先登录小狐狸');\n            } else {\n              var web3 = new _this2.Web3(window.web3.currentProvider); //交易所合约地址\n\n              var address = \"0x0cd43FFF2a992E094E829B4b826fC67aBAe2D6E3\"; //NFT合约地址\n\n              var addressNFT = \"0x250019C9E3EB59Ef6eFAB410408F6c8E246f5A24\";\n              var myContract = new web3.eth.Contract(Abi, address);\n              var myContractNft = new web3.eth.Contract(AbiNft, addressNFT); //授权nft\n\n              myContract.methods.approve(addressNFT, _this2.shopid).send({\n                from: res[0]\n              }).then(function (res) {\n                console.log('from res :' + res);\n              }).catch(function (error) {\n                console.log(\"授权error--->\" + error.code, error.message);\n              }); //上架NFT商品（商品id 金额 时间）\n\n              myContractNft.methods.sell(_this2.detaillist.tokenId, web3.utils.toWei(_this2.amount, 'ether'), _this2.mytime).send({\n                from: res[0]\n              }).then(function (res) {\n                console.log('from res :' + res);\n              }).catch(function (error) {\n                console.log(\"上架error--->\" + error.code, error.message);\n              });\n            }\n          });\n        } else {\n          this.$toast('请安装 MetaMask,浏览器才能开始使用。');\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["sellDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"wrap\">\r\n\t\t<van-nav-bar title=\"NFT details\" left-arrow @click-left=\"$router.go(-1)\" />\r\n\t\t<div class=\"contentone\">\r\n\t\t\t<div class=\"onecell\"><span class=\"onecelll\">Minted by</span><span @click=\"gootheraddress(detaillist.creator)\" class=\"onecellr\">{{detaillist.creator==null?'creator':detaillist.creator | ellipsis}}</span></div>\r\n\t\t\t<div class=\"twocell\"><span class=\"twocelll\">{{detaillist.name==null?'name':detaillist.name}}</span><span\r\n\t\t\t\t\tclass=\"twocellr\">#{{detaillist.tokenId}}</span></div>\r\n\t\t\t<div class=\"threecell\"><img :src=\"detaillist.image\" /></div>\r\n\t\t\t<div class=\"fourcell\">\r\n\t\t\t\t<div class=\"fourcelll\">\r\n\t\t\t\t\t<span class=\"fourcellone\">Owned by</span>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclass=\"fourcelltwo\" @click=\"gootheraddress(detaillist.owner)\">{{detaillist.owner==null?'detaillistowner':detaillist.owner | ellipsis }}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"fourcellr\">{{detaillist.offSheftTime}}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"contenttwo\">\r\n\t\t\t<div class=\"contenttwo1\">\r\n\t\t\t\t<div class=\"contenttwooo\">\r\n\t\t\t\t\t<div class=\"contenttwooot\"><span class=\"contenttwoooto\">Current Price</span><span\r\n\t\t\t\t\t\t\tclass=\"contenttwooott\">Fixed price</span></div>\r\n\t\t\t\t\t<div class=\"contenttwooob\">\r\n\t\t\t\t\t\t<van-field v-model=\"amount\" type=\"number\" placeholder=\"Please enter the amount\" />\r\n\t\t\t\t\t\t<span class=\"coinCompany\">BNB</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"contenttwoot\">\r\n\t\t\t\t\t<div class=\"contenttwooot\"><span class=\"contenttwoooto\">Listing cycle</span></div>\r\n\t\t\t\t\t<div class=\"contenttwooob\">\r\n\t\t\t\t\t\t<van-field v-model=\"mychangedate\" placeholder=\"Please enter the amount\" disabled />\r\n\t\t\t\t\t\t<img src=\"../assets/images/timeicon.png\" class=\"dateimg\" @click=\"showdatebox\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"datatimebox\" v-show=\"dateboxshow\">\r\n\t\t\t\t\t\t<van-picker title=\"标题\" :columns=\"columns\" :default-index=\"0\" @change=\"onChange\" />\r\n\t\t\t\t\t\t<!-- <div class=\"datatimeboxt\">\r\n\t\t\t\t\t\t\t<span>Days</span>\r\n\t\t\t\t\t\t\t<div :class=\"index==nowIndex?'checkedbox':'checkedboxno'\" @click=\"checked(index,item)\"\r\n\t\t\t\t\t\t\t\tv-for=\"(item,index) in daylist\" :key='index'>{{item}} Day</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"datatimeboxb\">\r\n\t\t\t\t\t\t\t<div class=\"datatimeboxbo\"><span>Start</span><span>End</span></div>\r\n\t\t\t\t\t\t\t<div class=\"datatimeboxbt\">\r\n\t\t\t\t\t\t\t\t<span class=\"datatimeboxbtspan\" @click=\"choosedatetime\">1</span>\r\n\t\t\t\t\t\t\t\t<span>——</span>\r\n\t\t\t\t\t\t\t\t<span class=\"datatimeboxbtspan\" @click=\"choosedatetime\">1</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"datatimeboxbe\" v-show=\"datetimeshow\">\r\n\t\t\t\t\t\t\t\t<van-datetime-picker v-model=\"currentDate\" type=\"date\" :min-date=\"minDate\"\r\n\t\t\t\t\t\t\t\t\t:max-date=\"maxDate\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div> -->\r\n\t\t\t\t\t\t<div class=\"datatimeboxbf\" @click=\"choosedatesub\">Confirm</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"contenttwoo\">\r\n\t\t\t\t<span>Cost</span>\r\n\t\t\t\t<van-icon name=\"info-o\" @click=\"icontip\" />\r\n\t\t\t\t<span v-show=\"tipboxshow\" class=\"tipbox\">Listing is free. Once sold, the following fees will be\r\n\t\t\t\t\tdeducted.</span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"contenttwot\">\r\n\t\t\t\t<div class=\"contenttwotl\">Service charge</div>\r\n\t\t\t\t<div class=\"contenttwotr\">2%</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"contenttwote\">\r\n\t\t\t\t<van-collapse v-model=\"activeNames\">\r\n\t\t\t\t\t<van-collapse-item title=\"Details of the works\" name=\"1\" class='mycell'>\r\n\t\t\t\t\t\t<!-- <van-cell title=\"Contract Address\" :value=\"detaillist.contract\" />\r\n\t\t\t\t\t\t<van-cell title=\"Token ID\" :value=\"detaillist.tokenId\" /> -->\r\n\t\t\t\t\t\t<van-cell title=\"Contract Address\">\r\n\t\t\t\t\t\t\t<template #right-icon>\r\n\t\t\t\t\t\t\t\t<span class=\"copyadd\">{{detaillist.contract==null?'detaillistcontract':detaillist.contract | ellipsis }}</span>\r\n\t\t\t\t\t\t\t\t<img class=\"copyimg\" @click=\"copyclick\" src=\"../assets/images/copy.png\">\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</van-cell>\r\n\t\t\t\t\t\t<van-cell title=\"Token ID\">\r\n\t\t\t\t\t\t\t<template #right-icon>\r\n\t\t\t\t\t\t\t\t<span class=\"copyadd\">{{detaillist.tokenId==null?'detaillisttokenId':detaillist.tokenId | ellipsis }}</span>\r\n\t\t\t\t\t\t\t\t<img class=\"copyimg\" @click=\"copyclick\" src=\"../assets/images/copy.png\">\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</van-cell>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<van-cell title=\"Token Standard\" value=\"ERC-721\" />\r\n\t\t\t\t\t\t<van-cell title=\"Blockchain\" value=\"BNB\" />\r\n\t\t\t\t\t</van-collapse-item>\r\n\t\t\t\t</van-collapse>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"sell\" @click=\"sellsub\">sell</div>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport Vue from 'vue'\r\n\timport {\r\n\t\tCollapse,\r\n\t\tCollapseItem,\r\n\t\tCell,\r\n\t\tField,\r\n\t\tCellGroup,\r\n\t\tIcon,\r\n\t\tPicker,\r\n\t\tNavBar\r\n\t} from 'vant'\r\n\tVue.use(Collapse).use(CollapseItem).use(Cell).use(Field).use(CellGroup).use(Icon).use(Picker).use(NavBar)\r\n\timport {\r\n\t\tgetNft\r\n\t} from \"../api\";\r\n\timport Abi from '../json/Abi.js'\r\n\timport AbiNft from '../json/AbiNft.js'\r\n\timport {\r\n\t\taddDate\r\n\t} from '../api/date.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tactiveNames: [0],\r\n\t\t\t\tamount: '',\r\n\t\t\t\tdetaillist: [],\r\n\t\t\t\ttipboxshow: false,\r\n\t\t\t\t//daylist: ['1', '3', '7', '30', '50', '180', ],\r\n\t\t\t\t//currentDate: true,\r\n\t\t\t\tminDate: new Date(2010, 0, 1),\r\n\t\t\t\tmaxDate: new Date(2010, 0, 31),\r\n\t\t\t\tcolumns: [],\r\n\t\t\t\t//nowIndex: 0,\r\n\t\t\t\t//datetimeshow: false,//日期组件\r\n\t\t\t\tdateboxshow: false, //日期弹框快捷方式\r\n\t\t\t\tmydate: '1',\r\n\t\t\t\tmychangedate: '',\r\n\t\t\t\tshopid: '',\r\n\t\t\t\tmytime: '',\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.shopid = this.$route.params.userId\r\n\t\t\tthis.detailNft(this.$route.params.userId)\r\n\t\t\tthis.putdate()\r\n\t\t\tthis.mychangedate = addDate(new Date, parseInt(0)) + ' - ' + addDate(new Date, parseInt(0)) + ' ( 1 Day ) '\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgootheraddress(address){\r\n\t\t\t\tconsole.log(address)\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: 'otherList',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\taddress: address\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//复制\r\n\t\t\tcopyclick(){\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// checked(index,item) {\r\n\t\t\t// \tthis.nowIndex = index\r\n\t\t\t// \tthis.mydate = item\r\n\t\t\t// },\r\n\t\t\t//大弹框\r\n\t\t\tshowdatebox() {\r\n\t\t\t\tthis.dateboxshow = !this.dateboxshow\r\n\t\t\t},\r\n\t\t\t//时间弹框\r\n\t\t\t// choosedatetime() {\r\n\t\t\t// \tthis.datetimeshow = true\r\n\t\t\t// },\r\n\t\t\ticontip() {\r\n\t\t\t\tthis.tipboxshow = !this.tipboxshow\r\n\t\t\t},\r\n\t\t\tputdate() {\r\n\t\t\t\tfor (var i = 1; i <= 180; i++) {\r\n\t\t\t\t\tthis.mychangedate = addDate(new Date, parseInt(i))\r\n\t\t\t\t\tvar newdate = i + ' Day   ' + this.mychangedate\r\n\t\t\t\t\tthis.columns.push(newdate)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonChange(value, index) {\r\n\t\t\t\tthis.mychangedate = addDate(new Date, parseInt(0)) + ' - ' + index.split(' ')[4] + ' (' + index.split(' ')[\r\n\t\t\t\t\t0] + index.split(' ')[1] + ')'\r\n\t\t\t\tthis.mytime = index.split(' ')[0] * 24 * 60 * 60\r\n\t\t\t\tconsole.log(`当前值: ${value}, 当前索引: ${index}`, this.mytime);\r\n\t\t\t},\r\n\t\t\t//时间选择按钮\r\n\t\t\tchoosedatesub() {\r\n\t\t\t\tthis.dateboxshow = false\r\n\t\t\t},\r\n\t\t\t//商品详情\r\n\t\t\tdetailNft(userId) {\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tid: userId,\r\n\t\t\t\t}\r\n\t\t\t\tgetNft(params).then(res => {\r\n\t\t\t\t\tif (res.code == \"200\") {\r\n\t\t\t\t\t\tthis.detaillist = res.result\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$toast(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//上架\r\n\t\t\tsellsub() {\r\n\t\t\t\tif (this.amount == '' || this.amount < 0.0001 || this.amount > 9999.9999) {\r\n\t\t\t\t\tthis.$toast('输入不正确，请重新输入')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (window.ethereum) {\r\n\t\t\t\t\t\twindow.ethereum.enable().then((res) => {\r\n\t\t\t\t\t\t\tif (!res[0]) {\r\n\t\t\t\t\t\t\t\tthis.$toast('请先登录小狐狸')\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconst web3 = new this.Web3(window.web3.currentProvider)\r\n\t\t\t\t\t\t\t\t//交易所合约地址\r\n\t\t\t\t\t\t\t\tconst address = \"0x0cd43FFF2a992E094E829B4b826fC67aBAe2D6E3\"\r\n\t\t\t\t\t\t\t\t//NFT合约地址\r\n\t\t\t\t\t\t\t\tconst addressNFT = \"0x250019C9E3EB59Ef6eFAB410408F6c8E246f5A24\"\r\n\t\t\t\t\t\t\t\tconst myContract = new web3.eth.Contract(Abi, address)\r\n\t\t\t\t\t\t\t\tconst myContractNft = new web3.eth.Contract(AbiNft, addressNFT)\r\n\t\t\t\t\t\t\t\t//授权nft\r\n\t\t\t\t\t\t\t\tmyContract.methods.approve(addressNFT, this.shopid)\r\n\t\t\t\t\t\t\t\t\t.send({\r\n\t\t\t\t\t\t\t\t\t\tfrom: res[0]\r\n\t\t\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('from res :' + res)\r\n\t\t\t\t\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"授权error--->\" + error.code, error.message)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t//上架NFT商品（商品id 金额 时间）\r\n\t\t\t\t\t\t\t\tmyContractNft.methods.sell(this.detaillist.tokenId, web3.utils.toWei(this.amount, 'ether'),\r\n\t\t\t\t\t\t\t\t\t\tthis.mytime)\r\n\t\t\t\t\t\t\t\t\t.send({\r\n\t\t\t\t\t\t\t\t\t\tfrom: res[0]\r\n\t\t\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('from res :' + res)\r\n\t\t\t\t\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"上架error--->\" + error.code, error.message)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$toast('请安装 MetaMask,浏览器才能开始使用。');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n</script>\r\n<style scoped>\r\n.onecelll {\r\n\t\theight: 14px;\r\n\t\tfont-size: 14px;\r\n\t\tfont-family: SourceHanSansCN-Regular, SourceHanSansCN;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #666666;\r\n\t\tline-height: 21px;\r\n\t}\r\n.onecellr{\r\n\tfloat:right;\r\n\ttext-align:right;\r\n\tcolor: #FF5603;\r\n\tfont-size: 12px;\r\n\twidth:200px;\r\n}\r\n\t.warp {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.contentone {\r\n\t\tborder-top:10px solid #F7F7F7;\r\n\t\tborder-bottom:10px solid #F7F7F7;\r\n\t\tpadding:10px 16px;\r\n\t}\r\n\r\n\t.onecell {\r\n\t\theight: 14px;\r\n\t\tfont-size: 14px;\r\n\t\tfont-family: SourceHanSansCN-Regular, SourceHanSansCN;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #666666;\r\n\t\tline-height: 21px;\r\n\t}\r\n\r\n\t.twocell {\r\n\t\tmargin: 8px 0;\r\n\t}\r\n\r\n\t.twocelll {\r\n\t\twidth: 43px;\r\n\t\theight: 18px;\r\n\t\tfont-size: 18px;\r\n\t\tfont-family: SourceHanSansCN-Medium, SourceHanSansCN;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.twocellr {\r\n\t\tfloat:right;\r\n\t}\r\n\r\n\t.threecell {\r\n\t\twidth:343px;\r\n\t}\r\n\r\n\t.threecell img {\r\n\t\twidth:100%;\r\n\t\tmargin:0 auto;\r\n\t}\r\n\r\n\t.dateimg,\r\n\t.coinCompany {\r\n\t\t/* width: 18px; */\r\n\t\theight: 18px;\r\n\t\tposition: absolute;\r\n\t\tright: 20px;\r\n\t\ttop: 0;\r\n\t\tmargin: 10px 0;\r\n\t}\r\n\r\n\t.coinCompany {\r\n\t\tposition: absolute;\r\n\t\tright: 20px;\r\n\t\ttop: 0;\r\n\t\tmargin: 10px 0;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #333333;\r\n\t\tline-height: 18px;\r\n\t}\r\n\r\n\t.fourcell {\r\n\t\tmargin:0 auto;\r\n\t\theight:35px;\r\n\t\tbackground: #FFFFFF;\r\n\t\tfont-size: 12px;\r\n\t\tfont-weight: 400;\r\n\t\tline-height: 35px;\r\n\t\tfont-family: SourceHanSansCN-Regular, SourceHanSansCN;\r\n\t}\r\n\r\n\t.fourcelll {\r\n\t\twidth:200px;\r\n\t\tdisplay:inline-block;\r\n\t}\r\n\r\n\t.fourcellone {\r\n\t\tcolor: #666666;\r\n\t}\r\n\r\n\t.fourcelltwo {\r\n\t\tmargin-left:5px;\r\n\t\tcolor: #FF5603;\r\n\t}\r\n\r\n\t.fourcellr {\r\n\t\tcolor: #999999;\r\n\t\tfloat: right;\r\n\t\tdisplay:inline-block;\r\n\t}\r\n\r\n\t.contenttwo {\r\n\t\tbackground:#FFFFFF;\r\n\t}\r\n\r\n\t.contenttwoo {\r\n\t\tpadding: 10px 20px 0 20px;\r\n\t}\r\n\r\n\t.contenttwoo span:nth-child(1) {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #000000;\r\n\t\tmargin-right: 2px;\r\n\t\tvertical-align: top;\r\n\t}\r\n\r\n\t.tipbox {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 260px;\r\n\t\theight: 35px;\r\n\t\tbackground: #FFF9F1;\r\n\t\tbox-shadow: 0px 1px 4px 1px rgba(0, 0, 0, 0.1);\r\n\t\tborder-radius: 4px;\r\n\t\tfont-size: 11px;\r\n\t\tcolor: #333333;\r\n\t\tline-height: 15px;\r\n\t\tpadding: 2px 7px;\r\n\t\tmargin-left: 2px;\r\n\t}\r\n\r\n\t/deep/.van-icon {\r\n\t\tvertical-align: top;\r\n\t\tmargin-top: -2px;\r\n\t}\r\n\r\n\t.contenttwot {\r\n\t\theight:50px;\r\n\t\tline-height:50px;\r\n\t\tdisplay:lex;\r\n\t\tborder-bottom: 0.026667rem solid #D8D8D8;\r\n\t\tpadding:0px 20px;\r\n\t}\r\n\r\n\t.contenttwote {\r\n\t\tpadding:0px 5px;\r\n\t}\r\n\r\n\t.contenttwotl {\r\n\t\twidth:350px;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #666666;\r\n\t}\r\n\r\n\r\n\t.contenttwotr {\r\n\t\tfloat: right;\r\n\t\theight: 27px;\r\n\t\tline-height: 27px;\r\n\t\tcolor: #333333;\r\n\t\tfont-size: 12px;\r\n\t\tmargin-top: 10px;\r\n\t}\r\n\r\n\t.mycell {\r\n\t\tbackground-color: #FFFFFF;\r\n\t}\r\n\r\n\t/deep/ .van-collapse-item__content {\r\n\t\tpadding: 0;\r\n\t}\r\n\r\n\t/deep/.van-cell {\r\n\t\tfont-size: 12px;\r\n\t}\r\n\r\n\t/deep/.van-cell::after {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\r\n\t/deep/.van-field__control {\r\n\t\tcolor: #999999;\r\n\t}\r\n\r\n\t/deep/.van-collapse-item--border::after {\r\n\t\tborder-top: none;\r\n\t}\r\n\r\n\t/deep/.van-hairline--top-bottom::after,\r\n\t.van-hairline-unset--top-bottom::after {\r\n\t\tborder-width: 0;\r\n\t}\r\n\r\n\t.van-col {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 11px;\r\n\t\tcolor: #666666;\r\n\t}\r\n\r\n\t/deep/.van-button--default {\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t.contenttwo1 {\r\n\t\tpadding: 12px 20px;\r\n\t\tborder-bottom: 0.026667rem solid #D8D8D8;\r\n\t}\r\n\r\n\t.contenttwooot {\r\n\t\tmargin-bottom: 10px;\r\n\t\tmargin-top: 10px;\r\n\t}\r\n\r\n\t.contenttwooot {\r\n\t\tmargin-bottom: 16px;\r\n\t}\r\n\r\n\t.contenttwoooto {\r\n\t\theight: 26px;\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.contenttwooott {\r\n\t\tfloat: right;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #999999;\r\n\t}\r\n\r\n\t.datatimebox {\r\n\t\tz-index: 9999;\r\n\t\tposition: absolute;\r\n\t\tbottom: 0px;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tmargin: 0 auto;\r\n\t\tbackground: #FFFFFF;\r\n\t\tbox-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.15);\r\n\t\tborder-radius: 8px;\r\n\t\tpadding: 0 15px 5px 15px;\r\n\t}\r\n\r\n\t.contenttwooob {\r\n\t\tposition: relative;\r\n\t\tbackground: #FFFFFF;\r\n\t\tbox-shadow: 0px 2px 5px 1px rgba(0, 0, 0, 0.15);\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t/* // .datatimeboxt span {\r\n\t// \tfont-size: 12px;\r\n\t// \tcolor: #333333;\r\n\t// \tline-height: 18px;\r\n\t// \tdisplay: inline-block;\r\n\t// \twidth: 100%;\r\n\t// }\r\n\r\n\t// .datatimeboxbo {\r\n\t// \tmargin: 24px 0 20px 0;\r\n\t// }\r\n\r\n\t// .datatimeboxbo span {\r\n\t// \twidth: 130px;\r\n\t// \tfont-size: 12px;\r\n\t// \tcolor: #333333;\r\n\t// \tline-height: 18px;\r\n\t// \tdisplay: inline-block;\r\n\t// }\r\n\r\n\t// .datatimeboxbo span:nth-child(1) {\r\n\t// \tmargin-right: 40px;\r\n\t// }\r\n\r\n\t// .datatimeboxbtspan {\r\n\t// \tdisplay: inline-block;\r\n\t// \twidth: 130px;\r\n\t// \theight: 32px;\r\n\t// \tbackground: #F2F2F2;\r\n\t// \tborder-radius: 5px;\r\n\t// \tline-height: 32px;\r\n\t// \ttext-align: center;\r\n\t// \tcolor: #666666;\r\n\t// \tfont-size: 12px;\r\n\t// }\r\n\r\n\t// .datatimeboxbt span:nth-child(2) {\r\n\t// \tcolor: #979797;\r\n\t// \ttext-align: center;\r\n\t// \twidth: 40px;\r\n\t// \tdisplay: inline-block;\r\n\t// } \r\n\t// .datatimeboxbt span:nth-child(3) {\r\n\t// \tfloat: right;\r\n\t// }\r\n\r\n\t// .datatimeboxt div {\r\n\t// \tdisplay: inline-block;\r\n\t// \twidth: 90px;\r\n\t// \theight: 30px;\r\n\t// \tline-height: 30px;\r\n\t// \tborder-radius: 5px;\r\n\t// \tfont-size: 12px;\r\n\t// \ttext-align: center;\r\n\t// \tmargin-top: 18px;\r\n\t// \tmargin-right: 10px;\r\n\t// }\r\n\r\n\t// .checkedbox {\r\n\t// \tbackground: #FADD5C;\r\n\t// \tcolor: #333333;\r\n\t// }\r\n\t// .checkedboxno {\r\n\t// \tbackground: #F2F2F2;\r\n\t// \tcolor: #999999;\r\n\t// } */\r\n\t.copyadd{\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #999999;\r\n\t\twidth:150px;\r\n\t\ttext-align:right;\r\n\t\tmargin-right:5px;\r\n\t}\r\n\t.copyimg{\r\n\t\twidth: 16px;\r\n\t\theight: 16px;\r\n\t\tmargin-top:5px;\r\n\t}\r\n\t.datatimeboxbf {\r\n\t\tbackground: #FADD5C;\r\n\t\twidth: 180px;\r\n\t\theight: 31px;\r\n\t\tline-height: 31px;\r\n\t\tborder-radius: 4px;\r\n\t\ttext-align: center;\r\n\t\tmargin: 5px auto;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #000000;\r\n\t}\r\n\r\n\t.sell {\r\n\t\tbackground: #FADD5C;\r\n\t\twidth: 180px;\r\n\t\theight: 44px;\r\n\t\tline-height: 44px;\r\n\t\tborder-radius: 4px;\r\n\t\ttext-align: center;\r\n\t\tmargin: 5px auto;\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #000000;\r\n\t}\r\n\r\n\t/deep/.van-nav-bar .van-icon {\r\n\t\tcolor: #000000;\r\n\t}\r\n</style>\n"],"sourceRoot":"src/views"}]}