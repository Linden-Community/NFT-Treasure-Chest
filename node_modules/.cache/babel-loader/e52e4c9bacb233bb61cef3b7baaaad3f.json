{"remainingRequest":"D:\\project\\nft\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\nft\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\project\\nft\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\nft\\src\\views\\home.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\nft\\src\\views\\home.vue","mtime":1650264739919},{"path":"D:\\project\\nft\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650249328532},{"path":"D:\\project\\nft\\node_modules\\babel-loader\\lib\\index.js","mtime":1650249335774},{"path":"D:\\project\\nft\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650249328532},{"path":"D:\\project\\nft\\node_modules\\vue-loader\\lib\\index.js","mtime":1650249334419}],"contextDependencies":[],"result":["import \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Abi from \"../json/Abi.js\";\nimport AbiNft from \"../json/AbiNft.js\";\nimport footBar from \"../components/footBar\";\nimport Vue from 'vue';\nVue.use(_NavBar).use(_Icon);\nimport { getShopDetail, listNft } from \"../api\";\nexport default {\n  data: function data() {\n    return {\n      myShop: [],\n      shopImage: '',\n      shoplist: []\n    };\n  },\n  mounted: function mounted() {\n    this.listRequest();\n    this.empower(); //授权账户\n  },\n  methods: {\n    //nft列表\n    listRequest: function listRequest() {\n      var _this = this;\n\n      var params = {\n        pageNo: 1,\n        pageSize: 10\n      };\n      listNft(params).then(function (res) {\n        if (res.code == '200') {\n          _this.shoplist = res.result.list;\n        } else {\n          _this.$toast(res.message);\n        }\n      });\n    },\n    //跳转详情\n    godetail: function godetail(item) {\n      //this.$router.push({path: 'shopDetail', query: {selected: \"2\"}})\n      this.$router.push({\n        name: 'shopDetail',\n        params: {\n          userId: item.id\n        }\n      });\n    },\n    //跳转搜索\n    onClickRight: function onClickRight() {\n      this.$router.push({\n        name: 'search',\n        params: {\n          owneradd: ''\n        }\n      });\n    },\n    //钱包账户授权\n    empower: function empower() {\n      var _this2 = this;\n\n      if (window.ethereum) {\n        window.ethereum.enable().then(function (res) {\n          if (!res[0]) {\n            _this2.$toast('请先登录小狐狸');\n          }\n        });\n      } else {\n        this.$toast('请安装 MetaMask,浏览器才能开始使用。');\n      }\n    },\n    get: function get() {\n      var _this3 = this;\n\n      if (window.ethereum) {\n        window.ethereum.enable().then(function (res) {\n          if (!res[0]) {\n            _this3.$toast('请先登录小狐狸');\n          } else {\n            //this.getBalance(res[0], 11111)\n            var web3 = new _this3.Web3(window.web3.currentProvider);\n            var address = \"0x0cd43FFF2a992E094E829B4b826fC67aBAe2D6E3\"; //合约地址\n\n            var addressNFT = \"0x250019C9E3EB59Ef6eFAB410408F6c8E246f5A24\";\n            var myContract = new web3.eth.Contract(Abi, address);\n            var myContractNft = new web3.eth.Contract(AbiNft, addressNFT); //查询NFT余额\n\n            myContract.methods.balanceOf(res[0]).call().then(function (balance) {\n              console.log('from balance:' + balance);\n            }); //查询NFT授权\n\n            myContract.methods.getApproved(104).call().then(function (address) {\n              console.log('from address :' + address);\n            }); //读合约\n            // myContract.methods.approve(\"0xaB069f281a15a3D0C2876F939331F4B63601cDBE\", 106)\n            // \t.send({\n            // \t\tfrom: res[0]\n            // \t}).then(res => {\n            // \t\tconsole.log('from res :' + res)\t\t\n            // \t})\n            //写合约\n            // myContract.methods.safeTransferFrom(res[0],\"0xaB069f281a15a3D0C2876F939331F4B63601cDBE\", 106)\n            // \t.send({\n            // \t\tfrom: res[0]\n            // \t}).then(res => {\n            // \t\tconsole.log('from res :' + res)\n            // \t})\n            //查询归属人\n\n            myContract.methods.ownerOf(110).call().then(function (ownerAddress) {\n              console.log('from ownerAddress :' + ownerAddress);\n            }); //查询元数据\n\n            myContract.methods.tokenURI(110).call().then(function (urlAddress) {\n              console.log('from urlAddress :' + urlAddress);\n            }); //NFT下架时间戳\n            // myContractNft.methods.getTimestamp(107).call().then(timesTamp => {\n            // \t//获取当前时间戳单位毫秒\n            // \tvar dataTime = new Date().getTime()\n            // \t//当前时间戳与上架时间（秒）相比\n            // \tconsole.log('from timesTamp :' + timesTamp, dataTime)\n            // \tif (timesTamp*1000 - dataTime > 0) {\n            // \t\t//商品未下架获取商品价格\n            // \t\t//NFT上架价格\n            // \t\tmyContractNft.methods.getPrices(110).call().then(prices => {\n            // \t\t\tconsole.log('from prices :' + prices)\n            // \t\t})\n            // \t\t//购买NFT 获取是否授权（授权在上架商品时操作只需操作一次 获取时间戳 获取价格 \n            // \t\tmyContractNft.methods.buy(110)\n            // \t\t.send({\n            // \t\t\tfrom: res[0],\n            // \t\t\tvalue:web3.utils.toWei('0.1', 'ether')//动态获取商品价格\n            // \t\t}).then(res => {\n            // \t\t\tconsole.log('from res :' + res)\n            // \t\t})\n            // \t} else {\n            // \t\tthis.$toast('商品已下架')\n            // \t}\n            // })\n            //上架NFT商品\n            //授权nft\n\n            myContract.methods.approve(\"0x0cd43FFF2a992E094E829B4b826fC67aBAe2D6E3\", 100).send({\n              from: res[0]\n            }).then(function (res) {\n              console.log('from res :' + res);\n            }).catch(function (error) {\n              console.log(\"授权error--->\" + error.code, error.message);\n            });\n            myContractNft.methods.sell(108, web3.utils.toWei('0.01', 'ether'), 360000).send({\n              from: res[0]\n            }).then(function (res) {\n              console.log('from res :' + res);\n            }).catch(function (error) {\n              console.log(\"上架error--->\" + error.code, error.message);\n            });\n          }\n        });\n      } else {\n        this.$toast('请安装 MetaMask,浏览器才能开始使用。');\n      }\n    },\n    //获取账号余额\n    getBalance: function getBalance(address) {\n      var _this4 = this;\n\n      window.ethereum.request({\n        method: 'eth_getBalance',\n        params: [address, 'latest']\n      }).then(function (result) {\n        console.log(\"获取余额success--->\" + result);\n        console.log(result);\n\n        if (result < 0) {\n          _this4.$toast('账户余额不足请先充值');\n        } else {\n          _this4.send();\n        }\n      }).catch(function (error) {\n        console.log(\"获取余额error--->\" + error.code);\n      });\n    },\n    //调用平台智能合约\n    send: function send() {\n      var params = [{\n        \"from\": \"0x38e6ed533127698b7df183caae070cdde602a5e3\",\n        \"to\": \"0x38e6ed533127698B7df183caAE070cDdE602A5E3\",\n        \"gas\": \"100\",\n        // 30400\n        \"gasPrice\": \"1\",\n        // 30400\n        \"value\": \"1\",\n        // 30400\n        \"data\": \"0xd46e8dd67c5d32be8d46e8dd67c5d32be8058bb8eb970870f072445675058bb8eb970870f072445675\"\n      }];\n      window.ethereum.sendAsync({\n        method: 'eth_sendTransaction',\n        params: params,\n        from: \"0x38e6ed533127698b7df183caae070cdde602a5e3\" // Provide the user's account to use.\n\n      }, function (err, result) {\n        console.log(err, result); // A typical node-style, error-first callback.\n        // The result varies by method, per the JSON RPC API.\n        // For example, this method will return a transaction hash on success.\n      });\n    },\n    //商品描述\n    des: function des() {\n      var _this5 = this;\n\n      //var api ='http://dweb.lindensys.cn/ipns/k51qzi5uqu5divqrok0get110odatax0tv8uqh3forzp1zhoxy7ft7cua188gt/babaofan/110'\n      getShopDetail('/100').then(function (res) {\n        _this5.myShop = res;\n        _this5.shopImage = res.image;\n        console.log(\"数据\", res, 111);\n      });\n    },\n    //获取上架时间\n    getTime: function getTime() {},\n    //获取价格\n    getPrices: function getPrices() {},\n    //获取归属人\n    getPeople: function getPeople() {}\n  },\n  components: {\n    footBar: footBar\n  }\n};",{"version":3,"sources":["home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"wrap\">\r\n\t\t<van-nav-bar title=\"List of NFTs\" @click-right=\"onClickRight\">\r\n\t\t\t<template #right>\r\n\t\t\t\t<van-icon name=\"search\" size=\"25\" />\r\n\t\t\t</template>\r\n\t\t</van-nav-bar>\r\n\t\t<div v-if=\"shoplist.length==0\" class=\"nolist\">\r\n\t\t\t<div><img src=\"../assets/images/nolist.png\" /></div>\r\n\t\t\t<div>No items to display</div>\r\n\t\t</div>\r\n\t\t<!-- 列表 -->\r\n\t\t<div class=\"content-box\" v-else>\r\n\t\t\t<div class=\"content-boxleft\" v-for=\"(item,index) in shoplist\" :key='index' @click=\"godetail(item)\">\r\n\t\t\t\t<!-- item.image -->\r\n\t\t\t\t<img v-if=\"item.image==null\" class=\"boximg\" src=\"../assets/images/nolist.png\" />\r\n\t\t\t\t<img v-else class=\"boximg\" :src=\"item.image\" />\r\n\t\t\t\t<div class=\"boxleft\">\r\n\t\t\t\t\t<span class=\"boxleftonel\">User name</span>\r\n\t\t\t\t\t<span class=\"boxleftoner\">Price</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"boxleft\">\r\n\t\t\t\t\t<span class=\"boxlefttwol omit\">{{item.name==null?'name':item.name}}</span>\r\n\t\t\t\t\t<span class=\"boxlefttwor omit\"><img src=\"../assets/images/icon1.png\">{{item.price}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"boxleft\">\r\n\t\t\t\t\t<span class=\"boxleftthreel omit\">#{{item.tokenId}}</span>\r\n\t\t\t\t\t<span class=\"boxleftthreer omit\">{{item.offSheftTime}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<foot-bar v-if=\"$route.meta.isMenu\"></foot-bar>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport Abi from '../json/Abi.js'\r\n\timport AbiNft from '../json/AbiNft.js'\r\n\timport footBar from '../components/footBar'\r\n\timport Vue from 'vue'\r\n\timport {\r\n\t\tNavBar,\r\n\t\tIcon\r\n\t} from 'vant'\r\n\tVue.use(NavBar).use(Icon)\r\n\timport {\r\n\t\tgetShopDetail,\r\n\t\tlistNft\r\n\t} from \"../api\";\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmyShop: [],\r\n\t\t\t\tshopImage: '',\r\n\t\t\t\tshoplist: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.listRequest()\r\n\t\t\tthis.empower() //授权账户\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//nft列表\r\n\t\t\tlistRequest() {\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tpageNo: 1,\r\n\t\t\t\t\tpageSize: 10,\r\n\t\t\t\t}\r\n\t\t\t\tlistNft(params).then(res => {\r\n\t\t\t\t\tif (res.code == '200') {\r\n\t\t\t\t\t\tthis.shoplist = res.result.list\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$toast(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//跳转详情\r\n\t\t\tgodetail(item) {\r\n\t\t\t\t//this.$router.push({path: 'shopDetail', query: {selected: \"2\"}})\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: 'shopDetail',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tuserId: item.id\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//跳转搜索\r\n\t\t\tonClickRight() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: 'search',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\towneradd: ''\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//钱包账户授权\r\n\t\t\tempower() {\r\n\t\t\t\tif (window.ethereum) {\r\n\t\t\t\t\twindow.ethereum.enable().then((res) => {\r\n\t\t\t\t\t\tif (!res[0]) {\r\n\t\t\t\t\t\t\tthis.$toast('请先登录小狐狸')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$toast('请安装 MetaMask,浏览器才能开始使用。');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tget() {\r\n\t\t\t\tif (window.ethereum) {\r\n\t\t\t\t\twindow.ethereum.enable().then((res) => {\r\n\t\t\t\t\t\tif (!res[0]) {\r\n\t\t\t\t\t\t\tthis.$toast('请先登录小狐狸')\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//this.getBalance(res[0], 11111)\r\n\t\t\t\t\t\t\tconst web3 = new this.Web3(window.web3.currentProvider)\r\n\t\t\t\t\t\t\tconst address = \"0x0cd43FFF2a992E094E829B4b826fC67aBAe2D6E3\"\r\n\t\t\t\t\t\t\t//合约地址\r\n\t\t\t\t\t\t\tconst addressNFT = \"0x250019C9E3EB59Ef6eFAB410408F6c8E246f5A24\"\r\n\t\t\t\t\t\t\tconst myContract = new web3.eth.Contract(Abi, address)\r\n\t\t\t\t\t\t\tconst myContractNft = new web3.eth.Contract(AbiNft, addressNFT)\r\n\t\t\t\t\t\t\t//查询NFT余额\r\n\t\t\t\t\t\t\tmyContract.methods.balanceOf(res[0]).call().then(balance => {\r\n\t\t\t\t\t\t\t\tconsole.log('from balance:' + balance)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t//查询NFT授权\r\n\t\t\t\t\t\t\tmyContract.methods.getApproved(104).call().then(address => {\r\n\t\t\t\t\t\t\t\tconsole.log('from address :' + address)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t//读合约\r\n\t\t\t\t\t\t\t// myContract.methods.approve(\"0xaB069f281a15a3D0C2876F939331F4B63601cDBE\", 106)\r\n\t\t\t\t\t\t\t// \t.send({\r\n\t\t\t\t\t\t\t// \t\tfrom: res[0]\r\n\t\t\t\t\t\t\t// \t}).then(res => {\r\n\t\t\t\t\t\t\t// \t\tconsole.log('from res :' + res)\t\t\r\n\t\t\t\t\t\t\t// \t})\r\n\t\t\t\t\t\t\t//写合约\r\n\t\t\t\t\t\t\t// myContract.methods.safeTransferFrom(res[0],\"0xaB069f281a15a3D0C2876F939331F4B63601cDBE\", 106)\r\n\t\t\t\t\t\t\t// \t.send({\r\n\t\t\t\t\t\t\t// \t\tfrom: res[0]\r\n\t\t\t\t\t\t\t// \t}).then(res => {\r\n\t\t\t\t\t\t\t// \t\tconsole.log('from res :' + res)\r\n\t\t\t\t\t\t\t// \t})\r\n\t\t\t\t\t\t\t//查询归属人\r\n\t\t\t\t\t\t\tmyContract.methods.ownerOf(110).call().then(ownerAddress => {\r\n\t\t\t\t\t\t\t\tconsole.log('from ownerAddress :' + ownerAddress)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t//查询元数据\r\n\t\t\t\t\t\t\tmyContract.methods.tokenURI(110).call().then(urlAddress => {\r\n\t\t\t\t\t\t\t\tconsole.log('from urlAddress :' + urlAddress)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t//NFT下架时间戳\r\n\t\t\t\t\t\t\t// myContractNft.methods.getTimestamp(107).call().then(timesTamp => {\r\n\t\t\t\t\t\t\t// \t//获取当前时间戳单位毫秒\r\n\t\t\t\t\t\t\t// \tvar dataTime = new Date().getTime()\r\n\t\t\t\t\t\t\t// \t//当前时间戳与上架时间（秒）相比\r\n\t\t\t\t\t\t\t// \tconsole.log('from timesTamp :' + timesTamp, dataTime)\r\n\t\t\t\t\t\t\t// \tif (timesTamp*1000 - dataTime > 0) {\r\n\t\t\t\t\t\t\t// \t\t//商品未下架获取商品价格\r\n\t\t\t\t\t\t\t// \t\t//NFT上架价格\r\n\t\t\t\t\t\t\t// \t\tmyContractNft.methods.getPrices(110).call().then(prices => {\r\n\t\t\t\t\t\t\t// \t\t\tconsole.log('from prices :' + prices)\r\n\t\t\t\t\t\t\t// \t\t})\r\n\t\t\t\t\t\t\t// \t\t//购买NFT 获取是否授权（授权在上架商品时操作只需操作一次 获取时间戳 获取价格 \r\n\t\t\t\t\t\t\t// \t\tmyContractNft.methods.buy(110)\r\n\t\t\t\t\t\t\t// \t\t.send({\r\n\t\t\t\t\t\t\t// \t\t\tfrom: res[0],\r\n\t\t\t\t\t\t\t// \t\t\tvalue:web3.utils.toWei('0.1', 'ether')//动态获取商品价格\r\n\t\t\t\t\t\t\t// \t\t}).then(res => {\r\n\t\t\t\t\t\t\t// \t\t\tconsole.log('from res :' + res)\r\n\t\t\t\t\t\t\t// \t\t})\r\n\t\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t\t// \t\tthis.$toast('商品已下架')\r\n\t\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t\t//上架NFT商品\r\n\t\t\t\t\t\t\t//授权nft\r\n\t\t\t\t\t\t\tmyContract.methods.approve(\"0x0cd43FFF2a992E094E829B4b826fC67aBAe2D6E3\", 100)\r\n\t\t\t\t\t\t\t\t.send({\r\n\t\t\t\t\t\t\t\t\tfrom: res[0]\r\n\t\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('from res :' + res)\r\n\t\t\t\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"授权error--->\" + error.code, error.message)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tmyContractNft.methods.sell(108, web3.utils.toWei('0.01', 'ether'), 360000)\r\n\t\t\t\t\t\t\t\t.send({\r\n\t\t\t\t\t\t\t\t\tfrom: res[0]\r\n\t\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('from res :' + res)\r\n\t\t\t\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"上架error--->\" + error.code, error.message)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$toast('请安装 MetaMask,浏览器才能开始使用。');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//获取账号余额\r\n\t\t\tgetBalance(address) {\r\n\t\t\t\twindow.ethereum.request({\r\n\t\t\t\t\t\tmethod: 'eth_getBalance',\r\n\t\t\t\t\t\tparams: [\r\n\t\t\t\t\t\t\taddress,\r\n\t\t\t\t\t\t\t'latest'\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\tconsole.log(\"获取余额success--->\" + result)\r\n\t\t\t\t\t\tconsole.log(result)\r\n\t\t\t\t\t\tif (result < 0) {\r\n\t\t\t\t\t\t\tthis.$toast('账户余额不足请先充值')\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.send()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\tconsole.log(\"获取余额error--->\" + error.code)\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//调用平台智能合约\r\n\t\t\tsend() {\r\n\t\t\t\tlet params = [{\r\n\t\t\t\t\t\"from\": \"0x38e6ed533127698b7df183caae070cdde602a5e3\",\r\n\t\t\t\t\t\"to\": \"0x38e6ed533127698B7df183caAE070cDdE602A5E3\",\r\n\t\t\t\t\t\"gas\": \"100\", // 30400\r\n\t\t\t\t\t\"gasPrice\": \"1\", // 30400\r\n\t\t\t\t\t\"value\": \"1\", // 30400\r\n\t\t\t\t\t\"data\": \"0xd46e8dd67c5d32be8d46e8dd67c5d32be8058bb8eb970870f072445675058bb8eb970870f072445675\"\r\n\t\t\t\t}]\r\n\t\t\t\twindow.ethereum.sendAsync({\r\n\t\t\t\t\tmethod: 'eth_sendTransaction',\r\n\t\t\t\t\tparams: params,\r\n\t\t\t\t\tfrom: \"0x38e6ed533127698b7df183caae070cdde602a5e3\", // Provide the user's account to use.\r\n\t\t\t\t}, function(err, result) {\r\n\t\t\t\t\tconsole.log(err, result)\r\n\t\t\t\t\t// A typical node-style, error-first callback.\r\n\t\t\t\t\t// The result varies by method, per the JSON RPC API.\r\n\t\t\t\t\t// For example, this method will return a transaction hash on success.\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//商品描述\r\n\t\t\tdes() {\r\n\t\t\t\t//var api ='http://dweb.lindensys.cn/ipns/k51qzi5uqu5divqrok0get110odatax0tv8uqh3forzp1zhoxy7ft7cua188gt/babaofan/110'\r\n\t\t\t\tgetShopDetail('/100').then(res => {\r\n\t\t\t\t\tthis.myShop = res\r\n\t\t\t\t\tthis.shopImage = res.image\r\n\t\t\t\t\tconsole.log(\"数据\", res, 111)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//获取上架时间\r\n\t\t\tgetTime() {\r\n\r\n\t\t\t},\r\n\t\t\t//获取价格\r\n\t\t\tgetPrices() {\r\n\r\n\t\t\t},\r\n\t\t\t//获取归属人\r\n\t\t\tgetPeople() {\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tfootBar\r\n\t\t}\r\n\t}\r\n</script>\r\n<style scoped>\r\n\r\n\t.nolist {\r\n\t\tbackground: #F7F7F7;\r\n\t\twidth: 100%;\r\n\t\theight: 90vh;\r\n\t}\r\n\r\n\t.nolist img {\r\n\t\t/* width: 105px; */\r\n\t\theight: 105px;\r\n\t\tmargin-top: 100px;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\t.nolist div:nth-child(1) {\r\n\t\tmargin: 0 auto;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.nolist div:nth-child(2) {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #999999;\r\n\t\tline-height: 36px;\r\n\t\ttext-align: center;\r\n\t\tpadding-bottom: 80px;\r\n\t}\r\n\r\n\t.shopName {\r\n\t\ttext-align: left;\r\n\t\tmargin: 10px auto;\r\n\t\twidth: 300px;\r\n\t}\r\n\r\n\t.shopDes {\r\n\t\twidth: 300px;\r\n\t\ttext-align: left;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t.content-box {\r\n\t\tborder-top: solid 10px #F7F7F7;\r\n\t\tpadding: 10px 16px 100px 16px;\r\n\t}\r\n\r\n\t.content-boxleft {\r\n\t\twidth: 48%;\r\n\t\theight: 235px;\r\n\t\tmargin: 0 0 10px 0;\r\n\t\tdisplay: inline-block;\r\n\t\tbackground: #FFFFFF;\r\n\t\tbox-shadow: 0px 4px 8px 0px rgba(0, 0, 0, 0.1);\r\n\t\tborder-radius: 10px;\r\n\t}\r\n\r\n\t.content-boxleft:nth-child(2n) {\r\n\t\tfloat:right\r\n\t}\r\n\r\n\t.boximg {\r\n\t\twidth: 100%;\r\n\t\theight: 163px;\r\n\t}\r\n\r\n\t.boxleft {\r\n\t\tmargin: 8px 10px;\r\n\t\tfont-size: 12px;\r\n\t}\r\n\r\n\t.boxleftonel {\r\n\t\tcolor: #666666;\r\n\t}\r\n\r\n\t.boxleftoner {\r\n\t\tcolor:#999999;\r\n\t\tfloat:right;\r\n\t\ttext-align:right;\r\n\t}\r\n\r\n\t.boxlefttwol {\r\n\t\tcolor:#333333;\r\n\t\twidth :50px;\r\n\t}\r\n\r\n\t.boxlefttwor {\r\n\t\tcolor: #F4BB0B;\r\n\t\tfloat: right;\r\n\t\twidth:80px;\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t.boxlefttwor img {\r\n\t\twidth: 12px;\r\n\t\theight: 12px;\r\n\t\tvertical-align: top;\r\n\t\tmargin-right: 2px;\r\n\t}\r\n\r\n\t.boxleftthreel {\r\n\t\tcolor: #333333;\r\n\t\twidth: 50px;\r\n\t}\r\n\r\n\t.boxleftthreer {\r\n\t\tcolor: #999999;\r\n\t\tfloat: right;\r\n\t\twidth: 80px;\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t.omit {\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\r\n\t/deep/.van-nav-bar .van-icon {\r\n\t\tcolor: #000000;\r\n\t}\r\n</style>"],"sourceRoot":"src/views"}]}